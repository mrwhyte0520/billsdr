import{r as $,j as t,D as z}from"./index-CIddALDL.js";import{E as x}from"./jspdf.es.min-CF4tyWO7.js";import"./jspdf.plugin.autotable-BskTgnMR.js";function E(){const[p,D]=$.useState(""),[f,v]=$.useState(""),h=[{id:"1",name:"Empresa ABC S.R.L.",currentBalance:125e3,creditLimit:2e5,status:"Activo"},{id:"2",name:"Comercial XYZ",currentBalance:85e3,creditLimit:15e4,status:"Activo"},{id:"3",name:"Distribuidora DEF",currentBalance:45e3,creditLimit:1e5,status:"Activo"},{id:"4",name:"Servicios GHI",currentBalance:0,creditLimit:5e4,status:"Inactivo"},{id:"5",name:"Importadora JKL",currentBalance:18e4,creditLimit:25e4,status:"Activo"}],S=[{id:"1",customerId:"1",customerName:"Empresa ABC S.R.L.",invoiceNumber:"FAC-001",amount:1e5,balance:5e4,daysOverdue:0,dueDate:"2024-02-15"},{id:"2",customerId:"1",customerName:"Empresa ABC S.R.L.",invoiceNumber:"FAC-002",amount:75e3,balance:75e3,daysOverdue:15,dueDate:"2024-01-20"},{id:"3",customerId:"2",customerName:"Comercial XYZ",invoiceNumber:"FAC-003",amount:85e3,balance:85e3,daysOverdue:0,dueDate:"2024-02-20"},{id:"4",customerId:"3",customerName:"Distribuidora DEF",invoiceNumber:"FAC-004",amount:45e3,balance:45e3,daysOverdue:0,dueDate:"2024-02-25"},{id:"5",customerId:"5",customerName:"Importadora JKL",invoiceNumber:"FAC-005",amount:12e4,balance:12e4,daysOverdue:30,dueDate:"2024-01-05"},{id:"6",customerId:"2",customerName:"Comercial XYZ",invoiceNumber:"FAC-006",amount:65e3,balance:65e3,daysOverdue:45,dueDate:"2023-12-20"}],m=[{id:"1",customerName:"Empresa ABC S.R.L.",amount:5e4,paymentMethod:"transfer",date:"2024-01-15",invoiceNumber:"FAC-001"},{id:"2",customerName:"Comercial XYZ",amount:12e4,paymentMethod:"check",date:"2024-01-20",invoiceNumber:"FAC-007"},{id:"3",customerName:"Empresa ABC S.R.L.",amount:25e3,paymentMethod:"cash",date:"2024-01-25",invoiceNumber:"FAC-008"},{id:"4",customerName:"Distribuidora DEF",amount:35e3,paymentMethod:"transfer",date:"2024-01-30",invoiceNumber:"FAC-009"},{id:"5",customerName:"Importadora JKL",amount:8e4,paymentMethod:"card",date:"2024-02-01",invoiceNumber:"FAC-010"}],N=()=>{const e=new x;e.setFontSize(20),e.text("Reporte de Antigüedad de Saldos",20,20),e.setFontSize(12),e.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40);const n=h.map(l=>{const c=S.filter(r=>r.customerId===l.id&&r.balance>0),d=c.filter(r=>r.daysOverdue===0).reduce((r,u)=>r+u.balance,0),s=c.filter(r=>r.daysOverdue>=1&&r.daysOverdue<=30).reduce((r,u)=>r+u.balance,0),i=c.filter(r=>r.daysOverdue>=31&&r.daysOverdue<=60).reduce((r,u)=>r+u.balance,0),a=c.filter(r=>r.daysOverdue>=61&&r.daysOverdue<=90).reduce((r,u)=>r+u.balance,0),o=c.filter(r=>r.daysOverdue>90).reduce((r,u)=>r+u.balance,0);return[l.name,`RD$ ${d.toLocaleString()}`,`RD$ ${s.toLocaleString()}`,`RD$ ${i.toLocaleString()}`,`RD$ ${a.toLocaleString()}`,`RD$ ${o.toLocaleString()}`,`RD$ ${l.currentBalance.toLocaleString()}`]});e.autoTable({startY:60,head:[["Cliente","Corriente","1-30 días","31-60 días","61-90 días","+90 días","Total"]],body:n,theme:"striped",headStyles:{fillColor:[239,68,68]},styles:{fontSize:8}}),e.save(`antiguedad-saldos-${new Date().toISOString().split("T")[0]}.pdf`)},C=()=>{const e=new x;e.setFontSize(20),e.text("Estados de Cuenta por Cliente",20,20),e.setFontSize(12),e.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40);let n=60;h.forEach((l,c)=>{c>0&&(e.addPage(),n=20),e.setFontSize(16),e.text(`Estado de Cuenta - ${l.name}`,20,n),n+=20;const d=S.filter(i=>i.customerId===l.id),s=m.filter(i=>i.customerName===l.name);if(d.length>0){e.setFontSize(14),e.text("Facturas:",20,n),n+=10;const i=d.map(a=>[a.invoiceNumber,`RD$ ${a.amount.toLocaleString()}`,`RD$ ${a.balance.toLocaleString()}`,a.daysOverdue>0?`${a.daysOverdue} días`:"Al día"]);e.autoTable({startY:n,head:[["Factura","Monto","Saldo","Estado"]],body:i,theme:"grid",styles:{fontSize:9}}),n=e.lastAutoTable.finalY+20}if(s.length>0){e.setFontSize(14),e.text("Pagos Recibidos:",20,n),n+=10;const i=s.map(a=>[a.date,`RD$ ${a.amount.toLocaleString()}`,a.paymentMethod==="transfer"?"Transferencia":a.paymentMethod==="check"?"Cheque":a.paymentMethod==="cash"?"Efectivo":"Tarjeta"]);e.autoTable({startY:n,head:[["Fecha","Monto","Método"]],body:i,theme:"grid",styles:{fontSize:9}})}e.setFontSize(12),e.text(`Saldo Actual: RD$ ${l.currentBalance.toLocaleString()}`,20,e.internal.pageSize.height-30)}),e.save(`estados-cuenta-${new Date().toISOString().split("T")[0]}.pdf`)},j=()=>{const e=new x;e.setFontSize(20),e.text("Reporte de Cobranza",20,20),e.setFontSize(12),e.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40),p&&f&&e.text(`Período: ${p} al ${f}`,20,50);const n=m.reduce((s,i)=>s+i.amount,0),l=m.reduce((s,i)=>(s[i.paymentMethod]=(s[i.paymentMethod]||0)+i.amount,s),{});e.setFontSize(14),e.text("Resumen de Cobranza",20,70);const c=[["Concepto","Monto"],["Total Cobrado",`RD$ ${n.toLocaleString()}`],["Número de Pagos",m.length.toString()],["Efectivo",`RD$ ${(l.cash||0).toLocaleString()}`],["Transferencias",`RD$ ${(l.transfer||0).toLocaleString()}`],["Cheques",`RD$ ${(l.check||0).toLocaleString()}`],["Tarjetas",`RD$ ${(l.card||0).toLocaleString()}`]];e.autoTable({startY:80,head:[c[0]],body:c.slice(1),theme:"grid",headStyles:{fillColor:[34,197,94]}}),e.setFontSize(14),e.text("Detalle de Pagos",20,e.lastAutoTable.finalY+20);const d=m.map(s=>[s.date,s.customerName,`RD$ ${s.amount.toLocaleString()}`,s.paymentMethod==="transfer"?"Transferencia":s.paymentMethod==="check"?"Cheque":s.paymentMethod==="cash"?"Efectivo":"Tarjeta"]);e.autoTable({startY:e.lastAutoTable.finalY+30,head:[["Fecha","Cliente","Monto","Método"]],body:d,theme:"striped",headStyles:{fillColor:[16,185,129]},styles:{fontSize:9}}),e.save(`reporte-cobranza-${new Date().toISOString().split("T")[0]}.pdf`)},L=()=>{const e=m.reduce((s,i)=>s+i.amount,0),n=m.reduce((s,i)=>(s[i.paymentMethod]=(s[i.paymentMethod]||0)+i.amount,s),{}),l=[["Reporte de Cobranza"],[`Fecha de generación: ${new Date().toLocaleDateString()}`],p&&f?[`Período: ${p} al ${f}`]:[],[""],["RESUMEN DE COBRANZA"],["Total Cobrado",`RD$ ${e.toLocaleString()}`],["Número de Pagos",m.length.toString()],["Efectivo",`RD$ ${(n.cash||0).toLocaleString()}`],["Transferencias",`RD$ ${(n.transfer||0).toLocaleString()}`],["Cheques",`RD$ ${(n.check||0).toLocaleString()}`],["Tarjetas",`RD$ ${(n.card||0).toLocaleString()}`],[""],["DETALLE DE PAGOS"],["Fecha","Cliente","Monto","Método"],...m.map(s=>[s.date,s.customerName,s.amount,s.paymentMethod==="transfer"?"Transferencia":s.paymentMethod==="check"?"Cheque":s.paymentMethod==="cash"?"Efectivo":"Tarjeta"])].filter(s=>s.length>0).map(s=>s.join(",")).join(`
`),c=new Blob([l],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");d.href=URL.createObjectURL(c),d.download=`reporte-cobranza-${new Date().toISOString().split("T")[0]}.csv`,d.click()},F=()=>{const e=new x;e.setFontSize(20),e.text("Reporte de Saldos por Cliente",20,20),e.setFontSize(12),e.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40);const n=h.reduce((a,o)=>a+o.currentBalance,0),l=h.reduce((a,o)=>a+o.creditLimit,0),c=h.filter(a=>a.status==="Activo").length,d=h.filter(a=>a.currentBalance>0).length;e.setFontSize(14),e.text("Resumen General",20,60);const s=[["Total Saldos por Cobrar",`RD$ ${n.toLocaleString()}`],["Total Límites de Crédito",`RD$ ${l.toLocaleString()}`],["Clientes Activos",c.toString()],["Clientes con Saldo",d.toString()],["Utilización de Crédito",`${(n/l*100).toFixed(1)}%`]];e.autoTable({startY:70,head:[["Concepto","Valor"]],body:s,theme:"grid",headStyles:{fillColor:[255,152,0]},styles:{fontSize:10}}),e.setFontSize(14),e.text("Detalle por Cliente",20,e.lastAutoTable.finalY+20);const i=h.map(a=>{const o=a.creditLimit>0?(a.currentBalance/a.creditLimit*100).toFixed(1):"0",r=a.creditLimit-a.currentBalance;return[a.name,`RD$ ${a.currentBalance.toLocaleString()}`,`RD$ ${a.creditLimit.toLocaleString()}`,`RD$ ${r.toLocaleString()}`,`${o}%`,a.status]});e.autoTable({startY:e.lastAutoTable.finalY+30,head:[["Cliente","Saldo Actual","Límite Crédito","Crédito Disponible","Utilización","Estado"]],body:i,theme:"striped",headStyles:{fillColor:[255,152,0]},styles:{fontSize:9}}),e.save(`saldos-por-cliente-${new Date().toISOString().split("T")[0]}.pdf`)},R=()=>{const e=new x;e.setFontSize(20),e.text("Reporte de Facturas Vencidas",20,20),e.setFontSize(12),e.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40);const n=S.filter(o=>o.daysOverdue>0&&o.balance>0),l=n.reduce((o,r)=>o+r.balance,0),c=n.filter(o=>o.daysOverdue>=1&&o.daysOverdue<=30),d=n.filter(o=>o.daysOverdue>=31&&o.daysOverdue<=60),s=n.filter(o=>o.daysOverdue>=61&&o.daysOverdue<=90),i=n.filter(o=>o.daysOverdue>90);e.setFontSize(14),e.text("Resumen de Vencimientos",20,60);const a=[["Total Facturas Vencidas",n.length.toString()],["Monto Total Vencido",`RD$ ${l.toLocaleString()}`],["1-30 días",`${c.length} facturas - RD$ ${c.reduce((o,r)=>o+r.balance,0).toLocaleString()}`],["31-60 días",`${d.length} facturas - RD$ ${d.reduce((o,r)=>o+r.balance,0).toLocaleString()}`],["61-90 días",`${s.length} facturas - RD$ ${s.reduce((o,r)=>o+r.balance,0).toLocaleString()}`],["Más de 90 días",`${i.length} facturas - RD$ ${i.reduce((o,r)=>o+r.balance,0).toLocaleString()}`]];if(e.autoTable({startY:70,head:[["Concepto","Detalle"]],body:a,theme:"grid",headStyles:{fillColor:[239,68,68]},styles:{fontSize:10}}),n.length>0){e.setFontSize(14),e.text("Detalle de Facturas Vencidas",20,e.lastAutoTable.finalY+20);const o=n.map(r=>[r.invoiceNumber,r.customerName,r.dueDate,`${r.daysOverdue} días`,`RD$ ${r.amount.toLocaleString()}`,`RD$ ${r.balance.toLocaleString()}`]);e.autoTable({startY:e.lastAutoTable.finalY+30,head:[["Factura","Cliente","Vencimiento","Días Atraso","Monto Original","Saldo Pendiente"]],body:o,theme:"striped",headStyles:{fillColor:[239,68,68]},styles:{fontSize:9}})}e.save(`facturas-vencidas-${new Date().toISOString().split("T")[0]}.pdf`)},w=()=>{const e=new x;e.setFontSize(20),e.text("Análisis de Patrones de Pago",20,20),e.setFontSize(12),e.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40);const n=h.map(a=>{const o=m.filter(g=>g.customerName===a.name),r=o.reduce((g,b)=>g+b.amount,0),u=o.length>0?r/o.length:0,A=o.length,y=o.reduce((g,b)=>(g[b.paymentMethod]=(g[b.paymentMethod]||0)+1,g),{}),T=Object.entries(y).reduce((g,b)=>y[g[0]]>y[b[0]]?g:b,["N/A",0])[0];return{customer:a.name,totalPaid:r,avgPayment:u,paymentFrequency:A,preferredMethod:T,currentBalance:a.currentBalance}}),l=m.reduce((a,o)=>a+o.amount,0),c=m.length>0?l/m.length:0,d=m.reduce((a,o)=>(a[o.paymentMethod]=(a[o.paymentMethod]||0)+o.amount,a),{});e.setFontSize(14),e.text("Estadísticas Generales",20,60);const s=[["Total Pagos Recibidos",`RD$ ${l.toLocaleString()}`],["Número de Transacciones",m.length.toString()],["Pago Promedio",`RD$ ${c.toLocaleString()}`],["Transferencias",`RD$ ${(d.transfer||0).toLocaleString()}`],["Cheques",`RD$ ${(d.check||0).toLocaleString()}`],["Efectivo",`RD$ ${(d.cash||0).toLocaleString()}`],["Tarjetas",`RD$ ${(d.card||0).toLocaleString()}`]];e.autoTable({startY:70,head:[["Concepto","Valor"]],body:s,theme:"grid",headStyles:{fillColor:[99,102,241]},styles:{fontSize:10}}),e.setFontSize(14),e.text("Análisis por Cliente",20,e.lastAutoTable.finalY+20);const i=n.map(a=>{const o=a.preferredMethod==="transfer"?"Transferencia":a.preferredMethod==="check"?"Cheque":a.preferredMethod==="cash"?"Efectivo":a.preferredMethod==="card"?"Tarjeta":"N/A";return[a.customer,`RD$ ${a.totalPaid.toLocaleString()}`,a.paymentFrequency.toString(),`RD$ ${a.avgPayment.toLocaleString()}`,o,`RD$ ${a.currentBalance.toLocaleString()}`]});e.autoTable({startY:e.lastAutoTable.finalY+30,head:[["Cliente","Total Pagado","Frecuencia","Pago Promedio","Método Preferido","Saldo Actual"]],body:i,theme:"striped",headStyles:{fillColor:[99,102,241]},styles:{fontSize:9}}),e.save(`analisis-pagos-${new Date().toISOString().split("T")[0]}.pdf`)};return t.jsx(z,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reportes de Cuentas por Cobrar"})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtros de Fecha"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Desde"}),t.jsx("input",{type:"date",value:p,onChange:e=>D(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Hasta"}),t.jsx("input",{type:"date",value:f,onChange:e=>v(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Antigüedad de Saldos"}),t.jsx("i",{className:"ri-calendar-line text-2xl text-blue-600"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Análisis de vencimientos por cliente y períodos de antigüedad"}),t.jsx("div",{className:"flex space-x-2",children:t.jsxs("button",{onClick:N,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[t.jsx("i",{className:"ri-file-pdf-line mr-2"}),"PDF"]})})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Estado de Cuenta"}),t.jsx("i",{className:"ri-file-list-line text-2xl text-green-600"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Movimientos detallados por cliente con facturas y pagos"}),t.jsxs("button",{onClick:C,className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[t.jsx("i",{className:"ri-file-pdf-line mr-2"}),"Generar PDF"]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reporte de Cobranza"}),t.jsx("i",{className:"ri-money-dollar-circle-line text-2xl text-purple-600"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Resumen de pagos recibidos por período y método de pago"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("button",{onClick:j,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[t.jsx("i",{className:"ri-file-pdf-line mr-2"}),"PDF"]}),t.jsxs("button",{onClick:L,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[t.jsx("i",{className:"ri-file-excel-line mr-2"}),"Excel"]})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Saldos por Cliente"}),t.jsx("i",{className:"ri-user-line text-2xl text-orange-600"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Listado de saldos actuales por cliente con límites de crédito"}),t.jsxs("button",{onClick:F,className:"w-full bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors whitespace-nowrap",children:[t.jsx("i",{className:"ri-file-pdf-line mr-2"}),"Generar PDF"]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Facturas Vencidas"}),t.jsx("i",{className:"ri-alarm-warning-line text-2xl text-red-600"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Listado de facturas vencidas con días de atraso"}),t.jsxs("button",{onClick:R,className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[t.jsx("i",{className:"ri-file-pdf-line mr-2"}),"Generar PDF"]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Análisis de Pagos"}),t.jsx("i",{className:"ri-bar-chart-line text-2xl text-indigo-600"})]}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Análisis estadístico de patrones de pago por cliente"}),t.jsxs("button",{onClick:w,className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors whitespace-nowrap",children:[t.jsx("i",{className:"ri-file-pdf-line mr-2"}),"Generar PDF"]})]})]})]})})}export{E as default};
//# sourceMappingURL=page-DfzUzAYC.js.map
