import{u as je,r as i,j as e,D as X}from"./index-CIddALDL.js";import{i as S}from"./database-D6UsPckU.js";function ye(){const{user:p}=je(),[d,m]=i.useState([]),[ee,B]=i.useState(!0),[u,j]=i.useState("dashboard"),[b,A]=i.useState([{id:"1",name:"Electrónicos"},{id:"2",name:"Accesorios"},{id:"3",name:"Suministros de Oficina"},{id:"4",name:"Muebles"},{id:"5",name:"Software"},{id:"6",name:"Ropa"},{id:"7",name:"Hogar"},{id:"8",name:"Deportes"}]),[se,f]=i.useState(!1),[te,N]=i.useState(!1),[g,_]=i.useState(null),[y,F]=i.useState(null),[v,Z]=i.useState(""),[T,G]=i.useState("all"),[M,P]=i.useState("all"),[x,w]=i.useState([]),[ae,L]=i.useState(!1),O=i.useRef(null),[r,c]=i.useState({name:"",sku:"",category:"",price:"",cost:"",stock:"",minStock:"",maxStock:"",barcode:"",description:"",supplier:"",imageUrl:"",status:"active"}),[E,q]=i.useState({name:""}),U=[{id:"1",name:"Laptop Dell Inspiron 15",sku:"DELL-INS-15-001",category:"Electrónicos",price:45e3,cost:35e3,stock:8,minStock:5,maxStock:50,barcode:"1234567890123",description:"Laptop Dell Inspiron 15 con procesador Intel Core i5, 8GB RAM, 256GB SSD",supplier:"Dell Technologies",imageUrl:"https://readdy.ai/api/search-image?query=Dell%20Inspiron%2015%20laptop%20computer%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20modern%20design&width=400&height=400&seq=laptop001&orientation=squarish",status:"active",createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"2",name:"Mouse Inalámbrico Logitech MX Master 3",sku:"LOG-MX3-002",category:"Accesorios",price:3500,cost:2500,stock:25,minStock:10,maxStock:100,barcode:"2345678901234",description:"Mouse inalámbrico ergonómico con sensor de alta precisión y batería de larga duración",supplier:"Logitech",imageUrl:"https://readdy.ai/api/search-image?query=Logitech%20MX%20Master%203%20wireless%20mouse%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20ergonomic%20design&width=400&height=400&seq=mouse001&orientation=squarish",status:"active",createdAt:"2024-01-16T11:30:00Z",updatedAt:"2024-01-16T11:30:00Z"},{id:"3",name:"Escritorio de Oficina Ejecutivo",sku:"DESK-EXEC-003",category:"Muebles",price:15e3,cost:1e4,stock:3,minStock:2,maxStock:20,barcode:"3456789012345",description:"Escritorio ejecutivo de madera con cajones y espacio amplio para trabajo",supplier:"Muebles Modernos SA",imageUrl:"https://readdy.ai/api/search-image?query=executive%20office%20desk%20wooden%20furniture%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20modern%20office%20furniture&width=400&height=400&seq=desk001&orientation=squarish",status:"active",createdAt:"2024-01-17T09:15:00Z",updatedAt:"2024-01-17T09:15:00Z"},{id:"4",name:"Silla Ergonómica de Oficina",sku:"CHAIR-ERG-004",category:"Muebles",price:8500,cost:6e3,stock:12,minStock:5,maxStock:30,barcode:"4567890123456",description:"Silla ergonómica con soporte lumbar ajustable y reposabrazos",supplier:"Ergonomic Solutions",imageUrl:"https://readdy.ai/api/search-image?query=ergonomic%20office%20chair%20with%20lumbar%20support%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20modern%20office%20furniture&width=400&height=400&seq=chair001&orientation=squarish",status:"active",createdAt:"2024-01-18T14:20:00Z",updatedAt:"2024-01-18T14:20:00Z"},{id:"5",name:"Papel Bond Tamaño Carta",sku:"PAPER-A4-005",category:"Suministros de Oficina",price:250,cost:180,stock:150,minStock:50,maxStock:500,barcode:"5678901234567",description:"Papel bond blanco tamaño carta, paquete de 500 hojas",supplier:"Papelería Central",imageUrl:"https://readdy.ai/api/search-image?query=white%20office%20paper%20stack%20letter%20size%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20office%20supplies&width=400&height=400&seq=paper001&orientation=squarish",status:"active",createdAt:"2024-01-19T08:45:00Z",updatedAt:"2024-01-19T08:45:00Z"},{id:"6",name:"Monitor LED 24 pulgadas",sku:"MON-LED-24-006",category:"Electrónicos",price:12e3,cost:9e3,stock:2,minStock:3,maxStock:25,barcode:"6789012345678",description:"Monitor LED de 24 pulgadas Full HD con conectividad HDMI y VGA",supplier:"Samsung Electronics",imageUrl:"https://readdy.ai/api/search-image?query=24%20inch%20LED%20monitor%20computer%20display%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20modern%20technology&width=400&height=400&seq=monitor001&orientation=squarish",status:"inactive",createdAt:"2024-01-20T16:10:00Z",updatedAt:"2024-01-20T16:10:00Z"}];i.useEffect(()=>{re()},[p]);const re=async()=>{B(!0);try{if(p){const s=await S.getItems(p.id);if(s&&s.length>0){const t=s.map(a=>({id:a.id,name:a.name,sku:a.sku,category:a.category||"Electrónicos",price:a.selling_price||0,cost:a.cost_price||0,stock:a.current_stock||0,minStock:a.min_stock||0,maxStock:a.max_stock||0,barcode:a.barcode||"",description:a.description||"",supplier:a.supplier||"",imageUrl:a.image_url||"",status:a.is_active?"active":"inactive",createdAt:a.created_at,updatedAt:a.updated_at}));m(t)}else m(U)}else m(U)}catch(s){console.error("Error loading products:",s),m(U)}finally{B(!1)}},h=d.filter(s=>{const t=s.name.toLowerCase().includes(v.toLowerCase())||s.sku.toLowerCase().includes(v.toLowerCase())||s.barcode.includes(v)||s.supplier.toLowerCase().includes(v.toLowerCase()),a=T==="all"||s.category===T,o=M==="all"||M==="low_stock"&&s.stock<=s.minStock||s.status===M;return t&&a&&o}),V=d.length,Q=d.filter(s=>s.status==="active").length,D=d.filter(s=>s.stock<=s.minStock).length,I=d.reduce((s,t)=>s+t.price*t.stock,0),H=d.reduce((s,t)=>s+t.cost*t.stock,0),le=I-H,oe=s=>{const t=s.target.files?.[0];if(t){const a=new FileReader;a.onload=o=>{c(l=>({...l,imageUrl:o.target?.result}))},a.readAsDataURL(t)}},ie=async s=>{s.preventDefault();try{const t={id:g?.id||Date.now().toString(),name:r.name,sku:r.sku,category:r.category,price:parseFloat(r.price),cost:parseFloat(r.cost),stock:parseInt(r.stock),minStock:parseInt(r.minStock),maxStock:parseInt(r.maxStock),barcode:r.barcode,description:r.description,supplier:r.supplier,imageUrl:r.imageUrl,status:r.status,createdAt:g?.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()};if(p){const a={name:r.name,sku:r.sku,category:r.category,selling_price:parseFloat(r.price),cost_price:parseFloat(r.cost),current_stock:parseInt(r.stock),min_stock:parseInt(r.minStock),max_stock:parseInt(r.maxStock),barcode:r.barcode,description:r.description,supplier:r.supplier,image_url:r.imageUrl,is_active:r.status==="active"};g?await S.updateItem(g.id,a):await S.createItem(p.id,a)}m(g?a=>a.map(o=>o.id===g.id?t:o):a=>[...a,t]),R(),f(!1)}catch(t){console.error("Error saving product:",t),alert("Error al guardar el producto. Intente nuevamente.")}},ce=s=>{_(s),c({name:s.name,sku:s.sku,category:s.category,price:s.price.toString(),cost:s.cost.toString(),stock:s.stock.toString(),minStock:s.minStock.toString(),maxStock:s.maxStock.toString(),barcode:s.barcode,description:s.description,supplier:s.supplier,imageUrl:s.imageUrl,status:s.status}),f(!0)},ne=async s=>{if(confirm("¿Está seguro de que desea eliminar este producto?"))try{p&&await S.deleteItem(s),m(t=>t.filter(a=>a.id!==s))}catch(t){console.error("Error deleting product:",t),alert("Error al eliminar el producto. Intente nuevamente.")}},de=async()=>{if(confirm(`¿Está seguro de que desea eliminar ${x.length} productos seleccionados?`))try{for(const s of x)p&&await S.deleteItem(s);m(s=>s.filter(t=>!x.includes(t.id))),w([]),L(!1)}catch(s){console.error("Error deleting products:",s),alert("Error al eliminar los productos. Intente nuevamente.")}},Y=s=>{m(t=>t.map(a=>x.includes(a.id)?{...a,status:s,updatedAt:new Date().toISOString()}:a)),w([]),L(!1)},K=()=>{const t=[["Nombre","SKU","Categoría","Precio","Costo","Stock","Stock Mín","Stock Máx","Proveedor","Estado"].join(","),...h.map(l=>[`"${l.name}"`,l.sku,l.category,l.price,l.cost,l.stock,l.minStock,l.maxStock,`"${l.supplier}"`,l.status==="active"?"Activo":"Inactivo"].join(","))].join(`
`),a=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(a),o.download=`productos_${new Date().toISOString().split("T")[0]}.csv`,o.click()},R=()=>{c({name:"",sku:"",category:"",price:"",cost:"",stock:"",minStock:"",maxStock:"",barcode:"",description:"",supplier:"",imageUrl:"",status:"active"}),_(null)},me=()=>{const s=Date.now().toString().slice(-6),t=Math.random().toString(36).substring(2,5).toUpperCase();return`PRD-${s}-${t}`},xe=()=>Math.floor(Math.random()*9e12)+1e12,ue=s=>{w(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},ge=()=>{x.length===h.length?w([]):w(h.map(s=>s.id))};i.useEffect(()=>{L(x.length>0)},[x]);const he=async s=>{if(s.preventDefault(),!E.name.trim()){alert("Por favor ingrese un nombre para la categoría");return}if(b.some(a=>a.name.toLowerCase()===E.name.trim().toLowerCase())){alert("Esta categoría ya existe");return}try{const a={id:y?.id||Date.now().toString(),name:E.name.trim()};y?(A(o=>o.map(l=>l.id===y.id?a:l)),m(o=>o.map(l=>l.category===y.name?{...l,category:a.name,updatedAt:new Date().toISOString()}:l))):A(o=>[...o,a]),z(),N(!1)}catch(a){console.error("Error saving category:",a),alert("Error al guardar la categoría. Intente nuevamente.")}},pe=s=>{F(s),q({name:s.name}),N(!0)},be=s=>{const t=b.find(o=>o.id===s);if(!t)return;const a=d.filter(o=>o.category===t.name);if(a.length>0){alert(`No se puede eliminar la categoría "${t.name}" porque tiene ${a.length} productos asociados. Primero mueva los productos a otra categoría.`);return}confirm(`¿Está seguro de que desea eliminar la categoría "${t.name}"?`)&&A(o=>o.filter(l=>l.id!==s))},z=()=>{q({name:""}),F(null)};return ee?e.jsx(X,{children:e.jsx("div",{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-200",children:"Cargando módulo de productos..."})]})})}):e.jsx(X,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>window.REACT_APP_NAVIGATE("/dashboard"),className:"flex items-center text-slate-400 hover:text-slate-100 transition-colors",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Volver al Inicio"]}),e.jsx("div",{className:"h-6 w-px bg-slate-700"}),e.jsx("h1",{className:"text-2xl font-bold text-slate-50",children:"Gestión de Productos"})]}),e.jsxs("button",{onClick:()=>{R(),f(!0)},className:"bg-gradient-to-r from-purple-500 via-fuchsia-500 to-sky-400 text-slate-950 px-4 py-2 rounded-xl hover:brightness-110 transition-colors whitespace-nowrap font-semibold shadow-md shadow-purple-500/40",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Agregar Producto"]})]}),e.jsx("div",{className:"border-b border-slate-800 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>j("dashboard"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${u==="dashboard"?"border-purple-500 text-purple-300":"border-transparent text-slate-400 hover:text-slate-100 hover:border-slate-600"}`,children:[e.jsx("i",{className:"ri-dashboard-line mr-2"}),"Dashboard"]}),e.jsxs("button",{onClick:()=>j("products"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${u==="products"?"border-purple-500 text-purple-300":"border-transparent text-slate-400 hover:text-slate-100 hover:border-slate-600"}`,children:[e.jsx("i",{className:"ri-shopping-bag-line mr-2"}),"Productos"]}),e.jsxs("button",{onClick:()=>j("categories"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${u==="categories"?"border-purple-500 text-purple-300":"border-transparent text-slate-400 hover:text-slate-100 hover:border-slate-600"}`,children:[e.jsx("i",{className:"ri-folder-line mr-2"}),"Categorías"]}),e.jsxs("button",{onClick:()=>j("reports"),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${u==="reports"?"border-purple-500 text-purple-300":"border-transparent text-slate-400 hover:text-slate-100 hover:border-slate-600"}`,children:[e.jsx("i",{className:"ri-file-chart-line mr-2"}),"Reportes"]})]})}),u==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"p-6 rounded-2xl border border-slate-800 bg-slate-950/80 shadow-lg shadow-slate-900/60",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-purple-500 via-fuchsia-500 to-sky-400 shadow-md shadow-purple-500/40",children:e.jsx("i",{className:"ri-shopping-bag-line text-2xl text-slate-950"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Total Productos"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-50",children:V})]})]})}),e.jsx("div",{className:"p-6 rounded-2xl border border-slate-800 bg-slate-950/80 shadow-lg shadow-slate-900/60",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-xl bg-emerald-500/20 border border-emerald-400/40",children:e.jsx("i",{className:"ri-check-line text-2xl text-emerald-300"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Productos Activos"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-50",children:Q})]})]})}),e.jsx("div",{className:"p-6 rounded-2xl border border-slate-800 bg-slate-950/80 shadow-lg shadow-slate-900/60",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-xl bg-red-500/15 border border-red-500/40",children:e.jsx("i",{className:"ri-alert-line text-2xl text-red-300"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Stock Bajo"}),e.jsx("p",{className:"text-2xl font-semibold text-slate-50",children:D})]})]})}),e.jsx("div",{className:"p-6 rounded-2xl border border-slate-800 bg-slate-950/80 shadow-lg shadow-slate-900/60",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/20 border border-purple-500/50",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-2xl text-purple-200"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Valor Total"}),e.jsxs("p",{className:"text-2xl font-semibold text-slate-50",children:["$",I.toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"p-6 rounded-2xl border border-slate-800 bg-slate-950/80 shadow-lg shadow-slate-900/60",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-50 mb-4",children:"Resumen Financiero"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Valor Total Inventario"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-50",children:["$",I.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Costo Total"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-50",children:["$",H.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Ganancia Potencial"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-400",children:["$",le.toLocaleString()]})]})]})]}),D>0&&e.jsx("div",{className:"rounded-2xl border border-red-500/40 bg-red-500/10 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-alert-line text-red-300 text-xl mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-100 font-medium",children:"Alerta de Stock Bajo"}),e.jsxs("p",{className:"text-red-200 text-sm",children:[D," productos tienen stock por debajo del mínimo recomendado."]})]}),e.jsx("button",{onClick:()=>{j("products"),P("low_stock")},className:"ml-auto bg-red-500 text-slate-950 px-4 py-2 rounded-xl hover:brightness-110 transition-colors text-sm whitespace-nowrap font-semibold shadow-md shadow-red-500/40",children:"Ver productos"})]})}),e.jsxs("div",{className:"rounded-2xl border border-slate-800 bg-slate-950/80 shadow-lg shadow-slate-900/60",children:[e.jsx("div",{className:"p-6 border-b border-slate-800",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-50",children:"Productos Recientes"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:d.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-800 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.imageUrl||"https://readdy.ai/api/search-image?query=generic%20product%20placeholder%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20simple%20design&width=60&height=60&seq=placeholder002&orientation=squarish",alt:s.name,className:"w-12 h-12 object-cover object-top rounded-lg border border-slate-700"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-50",children:s.name}),e.jsx("p",{className:"text-sm text-slate-400",children:s.sku})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-slate-50",children:["$",s.price.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Stock: ",s.stock]})]})]},s.id))})})]})]}),u==="products"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-search-line text-gray-400"})}),e.jsx("input",{type:"text",value:v,onChange:s=>Z(s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Buscar productos..."})]}),e.jsxs("select",{value:T,onChange:s=>G(s.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:[e.jsx("option",{value:"all",children:"Todas las Categorías"}),b.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsxs("select",{value:M,onChange:s=>P(s.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"inactive",children:"Inactivo"}),e.jsx("option",{value:"low_stock",children:"Stock Bajo"})]}),e.jsxs("button",{onClick:K,className:"bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Exportar Excel"]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx("span",{className:"font-medium",children:h.length}),e.jsx("span",{className:"ml-1",children:"productos"})]})]}),ae&&e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-blue-800",children:[x.length," productos seleccionados"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Y("active"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors whitespace-nowrap",children:"Activar"}),e.jsx("button",{onClick:()=>Y("inactive"),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700 transition-colors whitespace-nowrap",children:"Desactivar"}),e.jsx("button",{onClick:de,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors whitespace-nowrap",children:"Eliminar"})]})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx("input",{type:"checkbox",checked:x.length===h.length&&h.length>0,onChange:ge,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-600",children:"Seleccionar todos los productos visibles"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:h.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("i",{className:"ri-shopping-bag-line text-6xl text-gray-300 mb-4 block"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay productos registrados"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Comience agregando su primer producto al inventario."}),e.jsxs("button",{onClick:()=>{R(),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Agregar Primer Producto"]})]}):h.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-gray-100",children:e.jsx("input",{type:"checkbox",checked:x.includes(s.id),onChange:()=>ue(s.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("div",{className:"w-full h-48 bg-gray-100 overflow-hidden",children:e.jsx("img",{src:s.imageUrl||"https://readdy.ai/api/search-image?query=generic%20product%20placeholder%20on%20clean%20white%20background%2C%20professional%20product%20photography%2C%20high%20quality%2C%20detailed%20view%2C%20simple%20design&width=300&height=300&seq=placeholder003&orientation=squarish",alt:s.name,className:"w-full h-full object-cover object-top",onError:t=>{const a=t.target;a.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xNTAgMTAwQzE2MS4wNDYgMTAwIDE3MCA5MC45NTQzIDE3MCA4MEM1NyA2OS4wNDU3IDE0Ny45NTQgNjAgMTM2IDYwQzEyNC45NTQgNjAgMTE2IDY5LjA0NTcgMTE2IDgwQzExNiA5MC45NTQzIDEyNC45NTQgMTAwIDEzNiAxMDBIMTUwWiIgZmlsbD0iIzlDQTNBRiIvPgo8cGF0aCBkPSJNMTg2IDEyMEgxMTRDMTA3LjM3MyAxMjAgMTAyIDEyNS4zNzMgMTAyIDEzMlYyMDBDMTAyIDIwNi42MjcgMTA3LjM3MyAyMTIgMTE0IDIxMkgxODZDMTkyLjYyNyAyMTIgMTk4IDIwNi4yMjJgMTk0IDIwMFYxMzJDMTk0IDEyNS4zNzMgMTkyLjYyNyAxMjAgMTg2IDEyMFoiIGZpbGw9IiM5Q0EzQUYiLz4KPC9zdmc+"}})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s.category}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status==="active"?"Activo":"Inactivo"})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["SKU: ",s.sku]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:["RD$",s.price.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Costo: RD$",s.cost.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-medium ${s.stock<=s.minStock?"text-red-600":"text-gray-900"}`,children:["Stock: ",s.stock]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Min: ",s.minStock]})]})]}),s.stock<=s.minStock&&e.jsxs("div",{className:"bg-red-50 text-red-700 text-xs p-2 rounded mb-3",children:[e.jsx("i",{className:"ri-alert-line mr-1"}),"Stock bajo"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>ce(s),className:"flex-1 bg-blue-50 text-blue-600 py-2 px-3 rounded-lg hover:bg-blue-100 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-edit-line mr-1"}),"Editar"]}),e.jsxs("button",{onClick:()=>ne(s.id),className:"flex-1 bg-red-50 text-red-600 py-2 px-3 rounded-lg hover:bg-red-100 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-delete-bin-line mr-1"}),"Eliminar"]})]})]})]},s.id))})]}),u==="categories"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestión de Categorías"}),e.jsxs("button",{onClick:()=>{z(),N(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nueva Categoría"]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(s=>{const t=d.filter(o=>o.category===s.name),a=t.reduce((o,l)=>o+l.price*l.stock,0);return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-lg",children:s.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>pe(s),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Editar categoría",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{onClick:()=>be(s.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Eliminar categoría",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Productos:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Valor total:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["RD$",a.toLocaleString()]})]}),t.length>0&&e.jsxs("button",{onClick:()=>{j("products"),G(s.name),Z(""),P("all")},className:"w-full mt-3 bg-blue-50 text-blue-600 py-2 px-3 rounded-lg hover:bg-blue-100 transition-colors text-sm whitespace-nowrap",children:[e.jsx("i",{className:"ri-eye-line mr-2"}),"Ver Productos"]})]})]},s.id)})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"ri-folder-line text-6xl text-gray-300 mb-4 block"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay categorías registradas"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Comience creando su primera categoría de productos."}),e.jsxs("button",{onClick:()=>{z(),N(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Crear Primera Categoría"]})]})]})]})}),u==="reports"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reporte de Inventario"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Exportar lista completa de productos con stock y precios."}),e.jsxs("button",{onClick:K,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Descargar Excel"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Productos con Stock Bajo"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Lista de productos que necesitan reabastecimiento."}),e.jsxs("button",{onClick:()=>{const s=d.filter(n=>n.stock<=n.minStock),a=[["Nombre","SKU","Stock Actual","Stock Mínimo","Diferencia"].join(","),...s.map(n=>[`"${n.name}"`,n.sku,n.stock,n.minStock,n.minStock-n.stock].join(","))].join(`
`),o=new Blob(["\uFEFF"+a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(o),l.download=`stock_bajo_${new Date().toISOString().split("T")[0]}.csv`,l.click()},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-alert-line mr-2"}),"Descargar Reporte"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valorización de Inventario"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Reporte financiero del valor total del inventario."}),e.jsxs("button",{onClick:()=>{const s=["Categoría","Productos","Valor Total","Costo Total","Ganancia"],t=b.map(n=>{const $=d.filter(k=>k.category===n.name),W=$.reduce((k,C)=>k+C.price*C.stock,0),J=$.reduce((k,C)=>k+C.cost*C.stock,0);return[n.name,$.length,W,J,W-J]}),a=[s.join(","),...t.map(n=>n.join(","))].join(`
`),o=new Blob(["\uFEFF"+a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(o),l.download=`valorizacion_${new Date().toISOString().split("T")[0]}.csv`,l.click()},className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-money-dollar-circle-line mr-2"}),"Descargar Valorización"]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estadísticas Generales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:V}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total de Productos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:Q}),e.jsx("p",{className:"text-sm text-gray-600",children:"Productos Activos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:D}),e.jsx("p",{className:"text-sm text-gray-600",children:"Stock Bajo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["RD$",I.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"})]})]})]})]}),te&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:y?"Editar Categoría":"Nueva Categoría"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:he,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Categoría *"}),e.jsx("input",{type:"text",required:!0,value:E.name,onChange:s=>q(t=>({...t,name:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Electrónicos, Ropa, Hogar..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[y?"Actualizar":"Crear"," Categoría"]})]})]})]})})}),se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:g?"Editar Producto":"Agregar Producto"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen del Producto"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[r.imageUrl&&e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:r.imageUrl,alt:"Preview",className:"w-full h-full object-cover object-top"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:oe,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>O.current?.click(),className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 transition-colors text-center",children:[e.jsx("i",{className:"ri-upload-cloud-line text-2xl text-gray-400 mb-2 block"}),e.jsx("span",{className:"text-sm text-gray-600",children:r.imageUrl?"Cambiar imagen":"Subir imagen"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Producto *"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:s=>c(t=>({...t,name:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",required:!0,value:r.sku,onChange:s=>c(t=>({...t,sku:s.target.value})),className:"flex-1 p-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{type:"button",onClick:()=>c(s=>({...s,sku:me()})),className:"px-3 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg hover:bg-gray-200 transition-colors",children:e.jsx("i",{className:"ri-refresh-line"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría *"}),e.jsxs("select",{required:!0,value:r.category,onChange:s=>c(t=>({...t,category:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar categoría"}),b.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código de Barras"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:r.barcode,onChange:s=>c(t=>({...t,barcode:s.target.value})),className:"flex-1 p-3 border border-gray-300 rounded-l-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{type:"button",onClick:()=>c(s=>({...s,barcode:xe().toString()})),className:"px-3 bg-gray-100 border border-l-0 border-gray-300 rounded-r-lg hover:bg-gray-200 transition-colors",children:e.jsx("i",{className:"ri-refresh-line"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio de Venta *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:r.price,onChange:s=>c(t=>({...t,price:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Costo *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:r.cost,onChange:s=>c(t=>({...t,cost:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Actual *"}),e.jsx("input",{type:"number",required:!0,value:r.stock,onChange:s=>c(t=>({...t,stock:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Mínimo *"}),e.jsx("input",{type:"number",required:!0,value:r.minStock,onChange:s=>c(t=>({...t,minStock:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Máximo *"}),e.jsx("input",{type:"number",required:!0,value:r.maxStock,onChange:s=>c(t=>({...t,maxStock:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proveedor"}),e.jsx("input",{type:"text",value:r.supplier,onChange:s=>c(t=>({...t,supplier:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),e.jsx("textarea",{rows:3,value:r.description,onChange:s=>c(t=>({...t,description:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:r.status,onChange:s=>c(t=>({...t,status:s.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"inactive",children:"Inactivo"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[g?"Actualizar":"Agregar"," Producto"]})]})]})]})})})]})})}export{ye as default};
//# sourceMappingURL=page-CBxFq7v-.js.map
