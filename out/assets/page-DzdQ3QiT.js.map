{"version":3,"file":"page-DzdQ3QiT.js","sources":["../../src/pages/settings/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport DashboardLayout from '../../components/layout/DashboardLayout';\nimport { settingsService } from '../../services/database';\n\ninterface SettingsSection {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  href: string;\n}\n\ninterface ChangeHistoryItem {\n  id: string;\n  section: string;\n  action: string;\n  user: string;\n  timestamp: string;\n  details: string;\n}\n\nconst settingsSections: SettingsSection[] = [\n  {\n    id: 'company',\n    name: 'Información de la Empresa',\n    description: 'Configurar datos básicos de la empresa, logo y contacto',\n    icon: 'ri-building-line',\n    href: '/settings/company'\n  },\n  {\n    id: 'accounting',\n    name: 'Configuración Contable',\n    description: 'Configurar períodos fiscales, monedas y políticas contables',\n    icon: 'ri-calculator-line',\n    href: '/settings/accounting'\n  },\n  {\n    id: 'taxes',\n    name: 'Configuración de Impuestos',\n    description: 'Configurar tipos de impuestos, tasas y reglas fiscales',\n    icon: 'ri-percent-line',\n    href: '/settings/taxes'\n  },\n  {\n    id: 'inventory',\n    name: 'Configuración de Inventario',\n    description: 'Configurar métodos de valuación, categorías y almacenes',\n    icon: 'ri-archive-line',\n    href: '/settings/inventory'\n  },\n  {\n    id: 'payroll',\n    name: 'Configuración de Nómina',\n    description: 'Configurar conceptos de nómina, deducciones y beneficios',\n    icon: 'ri-money-dollar-circle-line',\n    href: '/settings/payroll'\n  },\n  {\n    id: 'backup',\n    name: 'Respaldos y Seguridad',\n    description: 'Configurar respaldos automáticos y políticas de seguridad',\n    icon: 'ri-shield-check-line',\n    href: '/settings/backup'\n  }\n];\n\nexport default function SettingsPage() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showHistoryModal, setShowHistoryModal] = useState(false);\n  const [showResetModal, setShowResetModal] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n\n  const filteredSections = settingsSections.filter(section =>\n    section.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    section.description.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleSectionClick = (href: string) => {\n    window.REACT_APP_NAVIGATE(href);\n  };\n\n  const handleExportConfiguration = async () => {\n    setLoading(true);\n    setMessage(null);\n    \n    try {\n      // Obtener todas las configuraciones del sistema\n      const [\n        companyInfo, \n        accountingSettings, \n        taxSettings, \n        inventorySettings, \n        payrollSettings,\n        taxRates,\n        warehouses,\n        payrollConcepts\n      ] = await Promise.all([\n        settingsService.getCompanyInfo(),\n        settingsService.getAccountingSettings(),\n        settingsService.getTaxSettings(),\n        settingsService.getInventorySettings(),\n        settingsService.getPayrollSettings(),\n        settingsService.getTaxRates(),\n        settingsService.getWarehouses(),\n        settingsService.getPayrollConcepts()\n      ]);\n\n      // Crear objeto de configuración completa\n      const configData = {\n        exportInfo: {\n          exportDate: new Date().toISOString(),\n          version: '1.0',\n          systemName: 'Contabi RD',\n          description: 'Configuración completa del sistema contable'\n        },\n        companyInfo: companyInfo || null,\n        accountingSettings: accountingSettings || null,\n        taxSettings: taxSettings || null,\n        inventorySettings: inventorySettings || null,\n        payrollSettings: payrollSettings || null,\n        taxRates: taxRates || [],\n        warehouses: warehouses || [],\n        payrollConcepts: payrollConcepts || []\n      };\n\n      // Crear y descargar archivo JSON\n      const blob = new Blob([JSON.stringify(configData, null, 2)], { \n        type: 'application/json' \n      });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `contabi-configuracion-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n\n      setMessage({ \n        type: 'success', \n        text: 'Configuración exportada exitosamente. El archivo se ha descargado.' \n      });\n    } catch (error) {\n      console.error('Error exporting configuration:', error);\n      setMessage({ \n        type: 'error', \n        text: 'Error al exportar la configuración. Inténtalo de nuevo.' \n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleImportConfiguration = () => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = '.json';\n    input.onchange = async (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (!file) return;\n\n      setLoading(true);\n      setMessage(null);\n      \n      try {\n        const text = await file.text();\n        const configData = JSON.parse(text);\n\n        // Validar estructura del archivo\n        if (!configData.exportInfo || !configData.exportInfo.version) {\n          throw new Error('Archivo de configuración inválido o corrupto');\n        }\n\n        // Verificar que es un archivo de Contabi RD\n        if (configData.exportInfo.systemName !== 'Contabi RD') {\n          throw new Error('Este archivo no es compatible con Contabi RD');\n        }\n\n        let importedSections = 0;\n\n        // Importar configuraciones una por una\n        if (configData.companyInfo) {\n          await settingsService.saveCompanyInfo(configData.companyInfo);\n          importedSections++;\n        }\n\n        if (configData.accountingSettings) {\n          await settingsService.saveAccountingSettings(configData.accountingSettings);\n          importedSections++;\n        }\n\n        if (configData.taxSettings) {\n          await settingsService.saveTaxSettings(configData.taxSettings);\n          importedSections++;\n        }\n\n        if (configData.inventorySettings) {\n          await settingsService.saveInventorySettings(configData.inventorySettings);\n          importedSections++;\n        }\n\n        if (configData.payrollSettings) {\n          await settingsService.savePayrollSettings(configData.payrollSettings);\n          importedSections++;\n        }\n\n        // Importar tasas de impuestos\n        if (configData.taxRates && Array.isArray(configData.taxRates)) {\n          for (const rate of configData.taxRates) {\n            try {\n              await settingsService.createTaxRate(rate);\n            } catch (error) {\n              // Continuar si ya existe\n              console.warn('Tax rate already exists or error creating:', error);\n            }\n          }\n        }\n\n        // Importar almacenes\n        if (configData.warehouses && Array.isArray(configData.warehouses)) {\n          for (const warehouse of configData.warehouses) {\n            try {\n              await settingsService.createWarehouse(warehouse);\n            } catch (error) {\n              // Continuar si ya existe\n              console.warn('Warehouse already exists or error creating:', error);\n            }\n          }\n        }\n\n        // Importar conceptos de nómina\n        if (configData.payrollConcepts && Array.isArray(configData.payrollConcepts)) {\n          for (const concept of configData.payrollConcepts) {\n            try {\n              await settingsService.createPayrollConcept(concept);\n            } catch (error) {\n              // Continuar si ya existe\n              console.warn('Payroll concept already exists or error creating:', error);\n            }\n          }\n        }\n\n        setMessage({ \n          type: 'success', \n          text: `Configuración importada exitosamente. ${importedSections} secciones actualizadas.` \n        });\n      } catch (error) {\n        console.error('Error importing configuration:', error);\n        let errorMessage = 'Error al importar la configuración.';\n        \n        if (error instanceof SyntaxError) {\n          errorMessage = 'El archivo seleccionado no es un JSON válido.';\n        } else if (error instanceof Error) {\n          errorMessage = error.message;\n        }\n        \n        setMessage({ type: 'error', text: errorMessage });\n      } finally {\n        setLoading(false);\n      }\n    };\n    input.click();\n  };\n\n  const handleResetConfiguration = async () => {\n    setLoading(true);\n    try {\n      // Restablecer configuraciones a valores por defecto para la versión general de BILLS DR\n      const defaultAccountingSettings = {\n        fiscal_year_start: '2024-01-01',\n        fiscal_year_end: '2024-12-31',\n        default_currency: 'DOP',\n        decimal_places: 2,\n        date_format: 'DD/MM/YYYY',\n        number_format: '1,234.56',\n        auto_backup: true,\n        backup_frequency: 'daily',\n        retention_period: 30\n      };\n\n      const defaultTaxSettings = {\n        itbis_rate: 18.0,\n        isr_rate: 27.0,\n        retention_rate: 10.0,\n        declaration_frequency: 'monthly',\n        fiscal_year_start: '2024-01-01',\n        fiscal_year_end: '2024-12-31'\n      };\n\n      const defaultInventorySettings = {\n        valuation_method: 'FIFO',\n        auto_reorder: false,\n        track_serial_numbers: false,\n        track_expiration_dates: false,\n        default_warehouse: 'Principal'\n      };\n\n      const defaultPayrollSettings = {\n        pay_frequency: 'monthly',\n        overtime_rate: 1.5,\n        social_security_rate: 2.87,\n        afp_rate: 2.87,\n        sfs_rate: 3.04,\n        christmas_bonus: true,\n        vacation_days: 14\n      };\n\n      await Promise.all([\n        settingsService.saveAccountingSettings(defaultAccountingSettings),\n        settingsService.saveTaxSettings(defaultTaxSettings),\n        settingsService.saveInventorySettings(defaultInventorySettings),\n        settingsService.savePayrollSettings(defaultPayrollSettings)\n      ]);\n\n      setMessage({ \n        type: 'success', \n        text: 'Configuración restablecida a valores por defecto del sistema' \n      });\n      setShowResetModal(false);\n    } catch (error) {\n      console.error('Error resetting configuration:', error);\n      setMessage({ \n        type: 'error', \n        text: 'Error al restablecer la configuración' \n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Mock data para historial de cambios\n  const changeHistory: ChangeHistoryItem[] = [\n    {\n      id: '1',\n      section: 'Información de la Empresa',\n      action: 'Actualización',\n      user: 'Admin',\n      timestamp: new Date().toISOString(),\n      details: 'Actualizado nombre de la empresa y dirección'\n    },\n    {\n      id: '2',\n      section: 'Configuración de Impuestos',\n      action: 'Modificación',\n      user: 'Contador',\n      timestamp: new Date(Date.now() - 86400000).toISOString(),\n      details: 'Modificada tasa de ITBIS de 18% a 18%'\n    },\n    {\n      id: '3',\n      section: 'Gestión de Usuarios',\n      action: 'Creación',\n      user: 'Admin',\n      timestamp: new Date(Date.now() - 172800000).toISOString(),\n      details: 'Creado nuevo usuario con rol de Contador'\n    }\n  ];\n\n  // Auto-hide message after 5 seconds\n  useState(() => {\n    if (message) {\n      const timer = setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  });\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        {/* Message */}\n        {message && (\n          <div className={`p-4 rounded-lg ${message.type === 'success' ? 'bg-green-50 text-green-700 border border-green-200' : 'bg-red-50 text-red-700 border border-red-200'}`}>\n            <div className=\"flex items-center\">\n              <i className={`${message.type === 'success' ? 'ri-check-circle-line' : 'ri-error-warning-line'} mr-2`}></i>\n              {message.text}\n            </div>\n          </div>\n        )}\n\n        {/* Header */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Configuración del Sistema</h1>\n              <p className=\"text-gray-600 mt-1\">\n                Administra la configuración general de tu sistema contable\n              </p>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <i className=\"ri-search-line text-gray-400\"></i>\n                </div>\n                <input\n                  type=\"text\"\n                  placeholder=\"Buscar configuración...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Settings Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredSections.map((section) => (\n            <div\n              key={section.id}\n              onClick={() => handleSectionClick(section.href)}\n              className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer group\"\n            >\n              <div className=\"flex items-start space-x-4\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition-colors\">\n                    <i className={`${section.icon} text-blue-600 text-xl`}></i>\n                  </div>\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors\">\n                    {section.name}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    {section.description}\n                  </p>\n                  <div className=\"mt-3 flex items-center text-sm text-blue-600 group-hover:text-blue-700\">\n                    <span>Configurar</span>\n                    <i className=\"ri-arrow-right-line ml-1\"></i>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Acciones Rápidas</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <button \n              onClick={handleExportConfiguration}\n              disabled={loading}\n              className=\"flex items-center justify-center space-x-2 bg-green-50 text-green-700 px-4 py-3 rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\n            >\n              <i className={`${loading ? 'ri-loader-4-line animate-spin' : 'ri-download-line'}`}></i>\n              <span>{loading ? 'Exportando...' : 'Exportar Configuración'}</span>\n            </button>\n            <button \n              onClick={handleImportConfiguration}\n              disabled={loading}\n              className=\"flex items-center justify-center space-x-2 bg-blue-50 text-blue-700 px-4 py-3 rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\n            >\n              <i className={`${loading ? 'ri-loader-4-line animate-spin' : 'ri-upload-line'}`}></i>\n              <span>{loading ? 'Importando...' : 'Importar Configuración'}</span>\n            </button>\n            <button \n              onClick={() => setShowResetModal(true)}\n              disabled={loading}\n              className=\"flex items-center justify-center space-x-2 bg-orange-50 text-orange-700 px-4 py-3 rounded-lg hover:bg-orange-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\n            >\n              <i className=\"ri-refresh-line\"></i>\n              <span>Restablecer Valores</span>\n            </button>\n            <button \n              onClick={() => setShowHistoryModal(true)}\n              className=\"flex items-center justify-center space-x-2 bg-purple-50 text-purple-700 px-4 py-3 rounded-lg hover:bg-purple-100 transition-colors whitespace-nowrap\"\n            >\n              <i className=\"ri-history-line\"></i>\n              <span>Historial de Cambios</span>\n            </button>\n          </div>\n        </div>\n\n        {/* System Status */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Estado del Sistema</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"flex items-center space-x-3 p-4 bg-green-50 rounded-lg\">\n              <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n              <div>\n                <p className=\"text-sm font-medium text-green-900\">Base de Datos</p>\n                <p className=\"text-xs text-green-700\">Conectada y funcionando</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3 p-4 bg-green-50 rounded-lg\">\n              <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n              <div>\n                <p className=\"text-sm font-medium text-green-900\">Respaldos</p>\n                <p className=\"text-xs text-green-700\">Último: Hoy 03:00 AM</p>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3 p-4 bg-yellow-50 rounded-lg\">\n              <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\n              <div>\n                <p className=\"text-sm font-medium text-yellow-900\">Actualizaciones</p>\n                <p className=\"text-xs text-yellow-700\">1 actualización disponible</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* History Modal */}\n        {showHistoryModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden\">\n              <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Historial de Cambios</h3>\n                <button\n                  onClick={() => setShowHistoryModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <i className=\"ri-close-line text-xl\"></i>\n                </button>\n              </div>\n              <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\n                <div className=\"space-y-4\">\n                  {changeHistory.map((item) => (\n                    <div key={item.id} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2\">\n                            <h4 className=\"font-medium text-gray-900\">{item.section}</h4>\n                            <span className={`px-2 py-1 text-xs rounded-full ${\n                              item.action === 'Creación' ? 'bg-green-100 text-green-800' :\n                              item.action === 'Actualización' ? 'bg-blue-100 text-blue-800' :\n                              'bg-orange-100 text-orange-800'\n                            }`}>\n                              {item.action}\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-gray-600 mt-1\">{item.details}</p>\n                          <div className=\"flex items-center space-x-4 mt-2 text-xs text-gray-500\">\n                            <span>Por: {item.user}</span>\n                            <span>{new Date(item.timestamp).toLocaleString('es-DO')}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Reset Confirmation Modal */}\n        {showResetModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4\">\n              <div className=\"p-6\">\n                <div className=\"flex items-center space-x-3 mb-4\">\n                  <div className=\"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center\">\n                    <i className=\"ri-alert-line text-orange-600\"></i>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Confirmar Restablecimiento</h3>\n                </div>\n                <p className=\"text-gray-600 mb-6\">\n                  ¿Estás seguro de que deseas restablecer todas las configuraciones a sus valores por defecto del sistema? \n                  Esta acción no se puede deshacer.\n                </p>\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={() => setShowResetModal(false)}\n                    className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n                  >\n                    Cancelar\n                  </button>\n                  <button\n                    onClick={handleResetConfiguration}\n                    disabled={loading}\n                    className=\"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {loading ? 'Restableciendo...' : 'Restablecer'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n}\n"],"names":["settingsSections","SettingsPage","searchTerm","setSearchTerm","useState","showHistoryModal","setShowHistoryModal","showResetModal","setShowResetModal","loading","setLoading","message","setMessage","filteredSections","section","handleSectionClick","href","handleExportConfiguration","companyInfo","accountingSettings","taxSettings","inventorySettings","payrollSettings","taxRates","warehouses","payrollConcepts","settingsService","configData","blob","url","link","error","handleImportConfiguration","input","e","file","text","importedSections","rate","warehouse","concept","errorMessage","handleResetConfiguration","defaultAccountingSettings","defaultTaxSettings","defaultInventorySettings","defaultPayrollSettings","changeHistory","timer","jsx","DashboardLayout","jsxs","item"],"mappings":"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"}