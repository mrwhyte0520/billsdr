import{r as x,j as e,D}from"./index-CIddALDL.js";import{E as M}from"./jspdf.es.min-CF4tyWO7.js";import"./jspdf.plugin.autotable-BskTgnMR.js";function k(){const[i,g]=x.useState(""),[h,f]=x.useState("all"),[b,l]=x.useState(!1),[$,d]=x.useState(null),p=[{id:"1",customerId:"1",customerName:"Empresa ABC S.R.L.",invoiceId:"1",invoiceNumber:"FAC-001",amount:5e4,paymentMethod:"transfer",date:"2024-01-15",reference:"TRF-001"},{id:"2",customerId:"2",customerName:"Comercial XYZ",invoiceId:"5",invoiceNumber:"FAC-005",amount:12e4,paymentMethod:"check",date:"2024-01-20",reference:"CHK-001"},{id:"3",customerId:"1",customerName:"Empresa ABC S.R.L.",invoiceId:"1",invoiceNumber:"FAC-001",amount:25e3,paymentMethod:"cash",date:"2024-01-25",reference:"EFE-001"},{id:"4",customerId:"3",customerName:"Distribuidora DEF",invoiceId:"4",invoiceNumber:"FAC-004",amount:45e3,paymentMethod:"card",date:"2024-01-28",reference:"TAR-001"},{id:"5",customerId:"2",customerName:"Comercial XYZ",invoiceId:"3",invoiceNumber:"FAC-003",amount:85e3,paymentMethod:"transfer",date:"2024-01-30",reference:"TRF-002"}],N=[{id:"1",invoiceNumber:"FAC-001",customerName:"Empresa ABC S.R.L.",balance:25e3},{id:"2",invoiceNumber:"FAC-002",customerName:"Empresa ABC S.R.L.",balance:75e3},{id:"3",invoiceNumber:"FAC-003",customerName:"Comercial XYZ",balance:0},{id:"4",invoiceNumber:"FAC-004",customerName:"Distribuidora DEF",balance:0}],m=t=>{switch(t){case"cash":return"Efectivo";case"check":return"Cheque";case"transfer":return"Transferencia";case"card":return"Tarjeta";default:return"Otro"}},j=t=>{switch(t){case"cash":return"bg-green-100 text-green-800";case"check":return"bg-blue-100 text-blue-800";case"transfer":return"bg-purple-100 text-purple-800";case"card":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},c=p.filter(t=>{const a=t.customerName.toLowerCase().includes(i.toLowerCase())||t.invoiceNumber.toLowerCase().includes(i.toLowerCase())||t.reference.toLowerCase().includes(i.toLowerCase()),s=h==="all"||t.paymentMethod===h;return a&&s}),y=()=>{const t=new M;t.setFontSize(20),t.text("Reporte de Pagos Recibidos",20,20),t.setFontSize(12),t.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40);const a=c.reduce((r,o)=>r+o.amount,0),s=c.reduce((r,o)=>(r[o.paymentMethod]=(r[o.paymentMethod]||0)+o.amount,r),{});t.setFontSize(14),t.text("Resumen de Pagos",20,60);const u=[["Concepto","Monto"],["Total Recibido",`RD$ ${a.toLocaleString()}`],["Número de Pagos",c.length.toString()],["Efectivo",`RD$ ${(s.cash||0).toLocaleString()}`],["Transferencias",`RD$ ${(s.transfer||0).toLocaleString()}`],["Cheques",`RD$ ${(s.check||0).toLocaleString()}`],["Tarjetas",`RD$ ${(s.card||0).toLocaleString()}`]];t.autoTable({startY:70,head:[u[0]],body:u.slice(1),theme:"grid",headStyles:{fillColor:[34,197,94]}}),t.setFontSize(14),t.text("Detalle de Pagos",20,t.lastAutoTable.finalY+20);const n=c.map(r=>[r.date,r.customerName,r.invoiceNumber,`RD$ ${r.amount.toLocaleString()}`,m(r.paymentMethod),r.reference]);t.autoTable({startY:t.lastAutoTable.finalY+30,head:[["Fecha","Cliente","Factura","Monto","Método","Referencia"]],body:n,theme:"striped",headStyles:{fillColor:[16,185,129]},styles:{fontSize:9}}),t.save(`pagos-recibidos-${new Date().toISOString().split("T")[0]}.pdf`)},v=()=>{const t=c.reduce((r,o)=>r+o.amount,0),a=c.reduce((r,o)=>(r[o.paymentMethod]=(r[o.paymentMethod]||0)+o.amount,r),{}),s=[["Reporte de Pagos Recibidos"],[`Fecha de generación: ${new Date().toLocaleDateString()}`],[""],["RESUMEN DE PAGOS"],["Total Recibido",`RD$ ${t.toLocaleString()}`],["Número de Pagos",c.length.toString()],["Efectivo",`RD$ ${(a.cash||0).toLocaleString()}`],["Transferencias",`RD$ ${(a.transfer||0).toLocaleString()}`],["Cheques",`RD$ ${(a.check||0).toLocaleString()}`],["Tarjetas",`RD$ ${(a.card||0).toLocaleString()}`],[""],["DETALLE DE PAGOS"],["Fecha","Cliente","Factura","Monto","Método","Referencia"],...c.map(r=>[r.date,r.customerName,r.invoiceNumber,r.amount,m(r.paymentMethod),r.reference])].map(r=>r.join(",")).join(`
`),u=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(u),n.download=`pagos-recibidos-${new Date().toISOString().split("T")[0]}.csv`,n.click()},w=()=>{d(null),l(!0)},C=t=>{const a=p.find(s=>s.id===t);a&&alert(`Detalles del pago:

Cliente: ${a.customerName}
Factura: ${a.invoiceNumber}
Monto: RD$ ${a.amount.toLocaleString()}
Método: ${m(a.paymentMethod)}
Referencia: ${a.reference}`)},S=t=>{const a=p.find(s=>s.id===t);a&&alert(`Imprimiendo recibo de pago ${a.reference}...`)},R=t=>{t.preventDefault(),alert("Pago registrado exitosamente"),l(!1),d(null)};return e.jsx(D,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pagos Recibidos"}),e.jsxs("button",{onClick:w,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-money-dollar-circle-line mr-2"}),"Registrar Pago"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-search-line text-gray-400"})}),e.jsx("input",{type:"text",value:i,onChange:t=>g(t.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Buscar por cliente, factura o referencia..."})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs("select",{value:h,onChange:t=>f(t.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:[e.jsx("option",{value:"all",children:"Todos los Métodos"}),e.jsx("option",{value:"cash",children:"Efectivo"}),e.jsx("option",{value:"check",children:"Cheque"}),e.jsx("option",{value:"transfer",children:"Transferencia"}),e.jsx("option",{value:"card",children:"Tarjeta"})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:y,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-pdf-line mr-2"}),"PDF"]}),e.jsxs("button",{onClick:v,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Excel"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Factura"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Método"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referencia"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.customerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.invoiceNumber}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["RD$",t.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(t.paymentMethod)}`,children:m(t.paymentMethod)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.reference}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>C(t.id),className:"text-blue-600 hover:text-blue-900",title:"Ver detalles",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{onClick:()=>S(t.id),className:"text-purple-600 hover:text-purple-900",title:"Imprimir recibo",children:e.jsx("i",{className:"ri-printer-line"})})]})})]},t.id))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Registrar Pago"}),e.jsx("button",{onClick:()=>{l(!1),d(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line"})})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Factura"}),e.jsxs("select",{required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar factura"}),N.filter(t=>t.balance>0).map(t=>e.jsxs("option",{value:t.id,children:[t.invoiceNumber," - ",t.customerName," (RD$",t.balance.toLocaleString(),")"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto a Pagar"}),e.jsx("input",{type:"number",step:"0.01",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Pago"}),e.jsxs("select",{required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"cash",children:"Efectivo"}),e.jsx("option",{value:"check",children:"Cheque"}),e.jsx("option",{value:"transfer",children:"Transferencia"}),e.jsx("option",{value:"card",children:"Tarjeta"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia"}),e.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Número de referencia"})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),d(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:"Registrar Pago"})]})]})]})})]})})}export{k as default};
//# sourceMappingURL=page--xM7lakR.js.map
