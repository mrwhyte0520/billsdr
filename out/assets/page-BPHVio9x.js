import{r as l,j as e,D as w}from"./index-CIddALDL.js";import{s as x}from"./database-D6UsPckU.js";function k(){const[a,g]=l.useState({pay_frequency:"monthly",overtime_rate:1.5,holiday_rate:2,vacation_days:14,sick_days:10,social_security_rate:2.87,health_insurance_rate:3.04,pension_rate:2.87}),[b,y]=l.useState([]),[h,i]=l.useState(!1),[o,d]=l.useState({name:"",type:"earning",formula:""}),[c,u]=l.useState(!1),[m,n]=l.useState(null);l.useEffect(()=>{f(),p()},[]);const f=async()=>{try{const s=await x.getPayrollSettings();s&&g(s)}catch(s){console.error("Error loading payroll settings:",s)}},p=async()=>{try{const s=await x.getPayrollConcepts();y(s)}catch(s){console.error("Error loading payroll concepts:",s)}},j=async s=>{s.preventDefault(),u(!0),n(null);try{await x.savePayrollSettings(a),n({type:"success",text:"Configuración de nómina guardada exitosamente"})}catch{n({type:"error",text:"Error al guardar la configuración"})}finally{u(!1)}},N=async s=>{s.preventDefault(),u(!0);try{await x.createPayrollConcept(o),n({type:"success",text:"Concepto de nómina creado exitosamente"}),i(!1),d({name:"",type:"earning",formula:""}),p()}catch{n({type:"error",text:"Error al crear el concepto"})}finally{u(!1)}},t=(s,r)=>{g(v=>({...v,[s]:r}))};return e.jsxs(w,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuración de Nómina"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configura conceptos de nómina, deducciones y beneficios"})]}),e.jsxs("button",{onClick:()=>window.REACT_APP_NAVIGATE("/settings"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[e.jsx("i",{className:"ri-arrow-left-line"}),e.jsx("span",{children:"Volver a Configuración"})]})]})}),m&&e.jsx("div",{className:`p-4 rounded-lg ${m.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:m.text}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuración Básica"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frecuencia de Pago *"}),e.jsxs("select",{value:a.pay_frequency,onChange:s=>t("pay_frequency",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"weekly",children:"Semanal"}),e.jsx("option",{value:"biweekly",children:"Quincenal"}),e.jsx("option",{value:"monthly",children:"Mensual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Días de Vacaciones Anuales"}),e.jsx("input",{type:"number",min:"0",value:a.vacation_days,onChange:s=>t("vacation_days",parseInt(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Días de Enfermedad Anuales"}),e.jsx("input",{type:"number",min:"0",value:a.sick_days,onChange:s=>t("sick_days",parseInt(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tasas de Horas Extra y Feriados"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tasa de Horas Extra (multiplicador)"}),e.jsx("input",{type:"number",step:"0.1",min:"1",value:a.overtime_rate,onChange:s=>t("overtime_rate",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tasa de Días Feriados (multiplicador)"}),e.jsx("input",{type:"number",step:"0.1",min:"1",value:a.holiday_rate,onChange:s=>t("holiday_rate",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tasas de Seguridad Social y Payroll Taxes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seguro Social (%)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:a.social_security_rate,onChange:s=>t("social_security_rate",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seguro de Salud (%)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:a.health_insurance_rate,onChange:s=>t("health_insurance_rate",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fondo de Pensiones (%)"}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:a.pension_rate,onChange:s=>t("pension_rate",parseFloat(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>window.REACT_APP_NAVIGATE("/settings"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Guardando...":"Guardar Cambios"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Conceptos de Nómina"}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx("i",{className:"ri-add-line"}),e.jsx("span",{children:"Nuevo Concepto"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fórmula"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.type==="earning"?"bg-green-100 text-green-800":s.type==="deduction"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:s.type==="earning"?"Ingreso":s.type==="deduction"?"Deducción":"Beneficio"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.formula}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.active?"Activo":"Inactivo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},s.id))})]})})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nuevo Concepto de Nómina"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),e.jsx("input",{type:"text",required:!0,value:o.name,onChange:s=>d(r=>({...r,name:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo *"}),e.jsxs("select",{required:!0,value:o.type,onChange:s=>d(r=>({...r,type:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"earning",children:"Ingreso"}),e.jsx("option",{value:"deduction",children:"Deducción"}),e.jsx("option",{value:"benefit",children:"Beneficio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fórmula *"}),e.jsx("input",{type:"text",required:!0,placeholder:"Ej: salario_base * 0.1",value:o.formula,onChange:s=>d(r=>({...r,formula:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Creando...":"Crear Concepto"})]})]})]})})]})}export{k as default};
//# sourceMappingURL=page-BPHVio9x.js.map
