import{r as x,j as e,D as L,L as P}from"./index-CIddALDL.js";import{E as w}from"./jspdf.es.min-CF4tyWO7.js";import"./jspdf.plugin.autotable-BskTgnMR.js";function O(){const[u,R]=x.useState(""),[c,C]=x.useState("all"),[i,S]=x.useState("all"),[k,h]=x.useState(!1),[F,j]=x.useState(!1),[l,g]=x.useState(null),D=[{id:"1",receiptNumber:"RC-001",customerId:"1",customerName:"Empresa ABC S.R.L.",date:"2024-01-15",amount:75e3,paymentMethod:"transfer",reference:"TRF-001",concept:"Pago de facturas FAC-001, FAC-002",status:"active",invoiceNumbers:["FAC-001","FAC-002"]},{id:"2",receiptNumber:"RC-002",customerId:"2",customerName:"Comercial XYZ",date:"2024-01-20",amount:12e4,paymentMethod:"check",reference:"CHK-001",concept:"Pago factura FAC-005",status:"active",invoiceNumbers:["FAC-005"]},{id:"3",receiptNumber:"RC-003",customerId:"1",customerName:"Empresa ABC S.R.L.",date:"2024-01-25",amount:5e4,paymentMethod:"cash",reference:"EFE-001",concept:"Pago parcial factura FAC-003",status:"active",invoiceNumbers:["FAC-003"]},{id:"4",receiptNumber:"RC-004",customerId:"3",customerName:"Distribuidora DEF",date:"2024-01-28",amount:85e3,paymentMethod:"card",reference:"TDC-001",concept:"Pago factura FAC-006",status:"active",invoiceNumbers:["FAC-006"]},{id:"5",receiptNumber:"RC-005",customerId:"2",customerName:"Comercial XYZ",date:"2024-01-30",amount:45e3,paymentMethod:"transfer",reference:"TRF-002",concept:"Pago anticipado",status:"cancelled",invoiceNumbers:[]}],o=t=>{switch(t){case"cash":return"Efectivo";case"check":return"Cheque";case"transfer":return"Transferencia";case"card":return"Tarjeta";default:return"Otro"}},N=t=>{switch(t){case"active":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=t=>{switch(t){case"active":return"Activo";case"cancelled":return"Anulado";default:return"Desconocido"}},r=D.filter(t=>{const a=t.customerName.toLowerCase().includes(u.toLowerCase())||t.receiptNumber.toLowerCase().includes(u.toLowerCase())||t.reference.toLowerCase().includes(u.toLowerCase()),n=c==="all"||t.status===c,d=i==="all"||t.paymentMethod===i;return a&&n&&d}),M=()=>{const t=new w;t.setFontSize(20),t.text("Reporte de Recibos de Cobro",20,20),t.setFontSize(12),t.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40),t.text(`Estado: ${c==="all"?"Todos":c}`,20,50),t.text(`Método de pago: ${i==="all"?"Todos":o(i)}`,20,60);const a=r.reduce((s,f)=>s+f.amount,0),n=r.filter(s=>s.status==="active").length,d=r.filter(s=>s.status==="cancelled").length;t.setFontSize(14),t.text("Resumen de Recibos",20,80);const p=[["Concepto","Valor"],["Total Recibido",`RD$ ${a.toLocaleString()}`],["Recibos Activos",n.toString()],["Recibos Anulados",d.toString()],["Total de Recibos",r.length.toString()]];t.autoTable({startY:90,head:[p[0]],body:p.slice(1),theme:"grid",headStyles:{fillColor:[59,130,246]}}),t.setFontSize(14),t.text("Detalle de Recibos",20,t.lastAutoTable.finalY+20);const m=r.map(s=>[s.receiptNumber,s.customerName,s.date,`RD$ ${s.amount.toLocaleString()}`,o(s.paymentMethod),s.reference,b(s.status)]);t.autoTable({startY:t.lastAutoTable.finalY+30,head:[["Recibo","Cliente","Fecha","Monto","Método","Referencia","Estado"]],body:m,theme:"striped",headStyles:{fillColor:[34,197,94]},styles:{fontSize:8}}),t.save(`recibos-cobro-${new Date().toISOString().split("T")[0]}.pdf`)},E=()=>{const t=r.reduce((s,f)=>s+f.amount,0),a=r.filter(s=>s.status==="active").length,n=r.filter(s=>s.status==="cancelled").length,d=[["Reporte de Recibos de Cobro"],[`Fecha de generación: ${new Date().toLocaleDateString()}`],[`Estado: ${c==="all"?"Todos":c}`],[`Método de pago: ${i==="all"?"Todos":o(i)}`],[""],["RESUMEN"],["Total Recibido",`RD$ ${t.toLocaleString()}`],["Recibos Activos",a.toString()],["Recibos Anulados",n.toString()],["Total de Recibos",r.length.toString()],[""],["DETALLE DE RECIBOS"],["Recibo","Cliente","Fecha","Monto","Método","Referencia","Concepto","Estado"],...r.map(s=>[s.receiptNumber,s.customerName,s.date,s.amount,o(s.paymentMethod),s.reference,s.concept,b(s.status)])].map(s=>s.join(",")).join(`
`),p=new Blob([d],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(p),m.download=`recibos-cobro-${new Date().toISOString().split("T")[0]}.csv`,m.click()},A=()=>{g(null),h(!0)},T=t=>{g(t),j(!0)},y=t=>{const a=new w;a.setFontSize(20),a.text("RECIBO DE COBRO",20,30),a.setFontSize(12),a.text(`Recibo No: ${t.receiptNumber}`,20,50),a.text(`Fecha: ${t.date}`,20,60),a.text(`Cliente: ${t.customerName}`,20,80),a.text(`Concepto: ${t.concept}`,20,90),a.text(`Método de Pago: ${o(t.paymentMethod)}`,20,100),a.text(`Referencia: ${t.reference}`,20,110),a.setFontSize(16),a.text(`Monto: RD$ ${t.amount.toLocaleString()}`,20,130),t.invoiceNumbers.length>0&&(a.setFontSize(12),a.text("Facturas aplicadas:",20,150),t.invoiceNumbers.forEach((n,d)=>{a.text(`- ${n}`,30,160+d*10)})),a.save(`recibo-${t.receiptNumber}.pdf`)},v=t=>{confirm("¿Está seguro de que desea anular este recibo?")&&alert("Recibo anulado exitosamente")},$=t=>{t.preventDefault(),alert("Recibo creado exitosamente"),h(!1)};return e.jsx(L,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recibos de Cobro"}),e.jsxs("nav",{className:"flex space-x-2 text-sm text-gray-600 mt-2",children:[e.jsx(P,{to:"/accounts-receivable",className:"hover:text-blue-600",children:"Cuentas por Cobrar"}),e.jsx("span",{children:"/"}),e.jsx("span",{children:"Recibos de Cobro"})]})]}),e.jsxs("button",{onClick:A,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Recibo"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Recibido"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["RD$",r.filter(t=>t.status==="active").reduce((t,a)=>t+a.amount,0).toLocaleString()]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-2xl text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recibos Activos"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.filter(t=>t.status==="active").length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-file-list-line text-2xl text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recibos Anulados"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.filter(t=>t.status==="cancelled").length})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-close-circle-line text-2xl text-red-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Promedio por Recibo"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["RD$",r.length>0?Math.round(r.reduce((t,a)=>t+a.amount,0)/r.length).toLocaleString():"0"]})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-bar-chart-line text-2xl text-purple-600"})})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-search-line text-gray-400"})}),e.jsx("input",{type:"text",value:u,onChange:t=>R(t.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Buscar por cliente, número de recibo o referencia..."})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs("select",{value:c,onChange:t=>C(t.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"cancelled",children:"Anulados"})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs("select",{value:i,onChange:t=>S(t.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:[e.jsx("option",{value:"all",children:"Todos los Métodos"}),e.jsx("option",{value:"cash",children:"Efectivo"}),e.jsx("option",{value:"check",children:"Cheque"}),e.jsx("option",{value:"transfer",children:"Transferencia"}),e.jsx("option",{value:"card",children:"Tarjeta"})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:M,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-pdf-line mr-2"}),"PDF"]}),e.jsxs("button",{onClick:E,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Excel"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recibo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Método"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referencia"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.receiptNumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.customerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.date}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["RD$",t.amount.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o(t.paymentMethod)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.reference}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(t.status)}`,children:b(t.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(t),className:"text-blue-600 hover:text-blue-900",title:"Ver detalles",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{onClick:()=>y(t),className:"text-purple-600 hover:text-purple-900",title:"Imprimir recibo",children:e.jsx("i",{className:"ri-printer-line"})}),t.status==="active"&&e.jsx("button",{onClick:()=>v(t.id),className:"text-red-600 hover:text-red-900",title:"Anular recibo",children:e.jsx("i",{className:"ri-close-circle-line"})})]})})]},t.id))})]})})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nuevo Recibo de Cobro"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line"})})]}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente"}),e.jsxs("select",{required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar cliente"}),e.jsx("option",{value:"1",children:"Empresa ABC S.R.L."}),e.jsx("option",{value:"2",children:"Comercial XYZ"}),e.jsx("option",{value:"3",children:"Distribuidora DEF"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),e.jsx("input",{type:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto"}),e.jsx("input",{type:"number",step:"0.01",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Pago"}),e.jsxs("select",{required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"cash",children:"Efectivo"}),e.jsx("option",{value:"check",children:"Cheque"}),e.jsx("option",{value:"transfer",children:"Transferencia"}),e.jsx("option",{value:"card",children:"Tarjeta"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia"}),e.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Número de referencia"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Concepto"}),e.jsx("textarea",{rows:3,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descripción del pago recibido..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Crear Recibo"})]})]})]})}),F&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Detalles del Recibo"}),e.jsx("button",{onClick:()=>{j(!1),g(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Número de Recibo"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:l.receiptNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:l.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Fecha"}),e.jsx("p",{className:"text-gray-900",children:l.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Monto"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["RD$",l.amount.toLocaleString()]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Método de Pago"}),e.jsx("p",{className:"text-gray-900",children:o(l.paymentMethod)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Referencia"}),e.jsx("p",{className:"text-gray-900",children:l.reference})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Estado"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(l.status)}`,children:b(l.status)})]}),l.invoiceNumbers.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Facturas Aplicadas"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:l.invoiceNumbers.map((t,a)=>e.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:t},a))})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Concepto"}),e.jsx("p",{className:"text-gray-900 mt-1",children:l.concept})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsxs("button",{onClick:()=>y(l),className:"flex-1 bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-printer-line mr-2"}),"Imprimir Recibo"]}),l.status==="active"&&e.jsxs("button",{onClick:()=>v(l.id),className:"flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-close-circle-line mr-2"}),"Anular Recibo"]})]})]})})]})})}export{O as default};
//# sourceMappingURL=page-BSs_rMaG.js.map
