import{r as m,j as e,D as E}from"./index-CIddALDL.js";import{E as I}from"./jspdf.es.min-CF4tyWO7.js";import"./jspdf.plugin.autotable-BskTgnMR.js";function z(){const[f,j]=m.useState(""),[o,w]=m.useState("all"),[v,x]=m.useState(!1),[S,p]=m.useState(!1),[c,i]=m.useState(null),g=[{id:"1",customerId:"1",customerName:"Empresa ABC S.R.L.",invoiceNumber:"FAC-001",date:"2024-01-01",dueDate:"2024-01-31",amount:1e5,paidAmount:5e4,balance:5e4,status:"partial",daysOverdue:0},{id:"2",customerId:"1",customerName:"Empresa ABC S.R.L.",invoiceNumber:"FAC-002",date:"2023-12-15",dueDate:"2024-01-14",amount:75e3,paidAmount:0,balance:75e3,status:"overdue",daysOverdue:15},{id:"3",customerId:"2",customerName:"Comercial XYZ",invoiceNumber:"FAC-003",date:"2024-01-10",dueDate:"2024-02-09",amount:85e3,paidAmount:0,balance:85e3,status:"pending",daysOverdue:0},{id:"4",customerId:"3",customerName:"Distribuidora DEF",invoiceNumber:"FAC-004",date:"2024-01-05",dueDate:"2024-02-04",amount:45e3,paidAmount:0,balance:45e3,status:"pending",daysOverdue:0},{id:"5",customerId:"2",customerName:"Comercial XYZ",invoiceNumber:"FAC-005",date:"2023-12-20",dueDate:"2024-01-19",amount:12e4,paidAmount:12e4,balance:0,status:"paid",daysOverdue:0}],D=[{id:"1",name:"Empresa ABC S.R.L."},{id:"2",name:"Comercial XYZ"},{id:"3",name:"Distribuidora DEF"},{id:"4",name:"Servicios GHI"}],C=t=>{switch(t){case"paid":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=t=>{switch(t){case"paid":return"Pagada";case"partial":return"Parcial";case"pending":return"Pendiente";case"overdue":return"Vencida";default:return"Desconocido"}},l=g.filter(t=>{const r=t.customerName.toLowerCase().includes(f.toLowerCase())||t.invoiceNumber.toLowerCase().includes(f.toLowerCase()),n=o==="all"||t.status===o;return r&&n}),F=()=>{const t=new I;t.setFontSize(20),t.text("Reporte de Facturas por Cobrar",20,20),t.setFontSize(12),t.text(`Fecha de generación: ${new Date().toLocaleDateString()}`,20,40),t.text(`Estado: ${o==="all"?"Todos":o}`,20,50);const r=l.reduce((a,u)=>a+u.amount,0),n=l.reduce((a,u)=>a+u.balance,0),y=l.reduce((a,u)=>a+u.paidAmount,0);t.setFontSize(14),t.text("Resumen Financiero",20,70);const b=[["Concepto","Monto"],["Total Facturado",`RD$ ${r.toLocaleString()}`],["Total Pagado",`RD$ ${y.toLocaleString()}`],["Saldo Pendiente",`RD$ ${n.toLocaleString()}`],["Número de Facturas",l.length.toString()]];t.autoTable({startY:80,head:[b[0]],body:b.slice(1),theme:"grid",headStyles:{fillColor:[59,130,246]},styles:{fontSize:10}}),t.setFontSize(14),t.text("Detalle de Facturas",20,t.lastAutoTable.finalY+20);const d=l.map(a=>[a.invoiceNumber,a.customerName,a.date,a.dueDate,`RD$ ${a.amount.toLocaleString()}`,`RD$ ${a.paidAmount.toLocaleString()}`,`RD$ ${a.balance.toLocaleString()}`,h(a.status)]);t.autoTable({startY:t.lastAutoTable.finalY+30,head:[["Factura","Cliente","Fecha","Vencimiento","Monto","Pagado","Saldo","Estado"]],body:d,theme:"striped",headStyles:{fillColor:[34,197,94]},styles:{fontSize:8}});const s=t.getNumberOfPages();for(let a=1;a<=s;a++)t.setPage(a),t.setFontSize(8),t.text(`Página ${a} de ${s}`,20,t.internal.pageSize.height-10),t.text("Sistema de Gestión Empresarial",t.internal.pageSize.width-60,t.internal.pageSize.height-10);t.save(`facturas-por-cobrar-${new Date().toISOString().split("T")[0]}.pdf`)},$=()=>{const t=l.reduce((s,a)=>s+a.amount,0),r=l.reduce((s,a)=>s+a.balance,0),n=l.reduce((s,a)=>s+a.paidAmount,0),y=[["Reporte de Facturas por Cobrar"],[`Fecha de generación: ${new Date().toLocaleDateString()}`],[`Estado: ${o==="all"?"Todos":o}`],[""],["RESUMEN FINANCIERO"],["Total Facturado",`RD$ ${t.toLocaleString()}`],["Total Pagado",`RD$ ${n.toLocaleString()}`],["Saldo Pendiente",`RD$ ${r.toLocaleString()}`],["Número de Facturas",l.length.toString()],[""],["DETALLE DE FACTURAS"],["Factura","Cliente","Fecha","Vencimiento","Monto","Pagado","Saldo","Estado","Días Vencido"],...l.map(s=>[s.invoiceNumber,s.customerName,s.date,s.dueDate,s.amount,s.paidAmount,s.balance,h(s.status),s.daysOverdue])].map(s=>s.join(",")).join(`
`),b=new Blob([y],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");d.href=URL.createObjectURL(b),d.download=`facturas-por-cobrar-${new Date().toISOString().split("T")[0]}.csv`,d.click()},k=()=>{i(null),x(!0)},N=t=>{i(t||null),p(!0)},R=t=>{const r=g.find(n=>n.id===t);r&&alert(`Detalles de la factura ${r.invoiceNumber}:

Cliente: ${r.customerName}
Monto: RD$ ${r.amount.toLocaleString()}
Saldo: RD$ ${r.balance.toLocaleString()}
Estado: ${h(r.status)}`)},P=t=>{const r=g.find(n=>n.id===t);r&&alert(`Imprimiendo factura ${r.invoiceNumber}...`)},L=t=>{t.preventDefault(),alert("Factura creada exitosamente"),x(!1)},A=t=>{t.preventDefault(),alert("Pago registrado exitosamente"),p(!1),i(null)};return e.jsx(E,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Facturas por Cobrar"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nueva Factura"]}),e.jsxs("button",{onClick:()=>N(),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-money-dollar-circle-line mr-2"}),"Registrar Pago"]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"ri-search-line text-gray-400"})}),e.jsx("input",{type:"text",value:f,onChange:t=>j(t.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Buscar por cliente o número de factura..."})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs("select",{value:o,onChange:t=>w(t.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8",children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),e.jsx("option",{value:"pending",children:"Pendientes"}),e.jsx("option",{value:"partial",children:"Parciales"}),e.jsx("option",{value:"paid",children:"Pagadas"}),e.jsx("option",{value:"overdue",children:"Vencidas"})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:F,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-pdf-line mr-2"}),"PDF"]}),e.jsxs("button",{onClick:$,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Excel"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Factura"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pagado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.invoiceNumber}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.customerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.date}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[t.dueDate,t.daysOverdue>0&&e.jsxs("span",{className:"ml-2 text-red-600 text-xs",children:["(",t.daysOverdue," días)"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$",t.amount.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$",t.paidAmount.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["RD$",t.balance.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C(t.status)}`,children:h(t.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>N(t),className:"text-green-600 hover:text-green-900",title:"Registrar Pago",children:e.jsx("i",{className:"ri-money-dollar-circle-line"})}),e.jsx("button",{onClick:()=>R(t.id),className:"text-blue-600 hover:text-blue-900",title:"Ver Detalles",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{onClick:()=>P(t.id),className:"text-purple-600 hover:text-purple-900",title:"Imprimir",children:e.jsx("i",{className:"ri-printer-line"})})]})})]},t.id))})]})})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nueva Factura"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line"})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente"}),e.jsxs("select",{required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar cliente"}),D.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Vencimiento"}),e.jsx("input",{type:"date",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),e.jsx("textarea",{rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descripción de los productos o servicios..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto"}),e.jsx("input",{type:"number",step:"0.01",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Crear Factura"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Registrar Pago"}),e.jsx("button",{onClick:()=>{p(!1),i(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line"})})]}),c&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Factura: ",e.jsx("span",{className:"font-medium",children:c.invoiceNumber})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Cliente: ",e.jsx("span",{className:"font-medium",children:c.customerName})]}),e.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:["Saldo: RD$",c.balance.toLocaleString()]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[!c&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Factura"}),e.jsxs("select",{required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"",children:"Seleccionar factura"}),g.filter(t=>t.balance>0).map(t=>e.jsxs("option",{value:t.id,children:[t.invoiceNumber," - ",t.customerName," (RD$",t.balance.toLocaleString(),")"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto a Pagar"}),e.jsx("input",{type:"number",step:"0.01",required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",max:c?.balance||void 0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Pago"}),e.jsxs("select",{required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8",children:[e.jsx("option",{value:"cash",children:"Efectivo"}),e.jsx("option",{value:"check",children:"Cheque"}),e.jsx("option",{value:"transfer",children:"Transferencia"}),e.jsx("option",{value:"card",children:"Tarjeta"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referencia"}),e.jsx("input",{type:"text",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Número de referencia"})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{p(!1),i(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:"Registrar Pago"})]})]})]})})]})})}export{z as default};
//# sourceMappingURL=page-34Evf1Rz.js.map
