{"version":3,"file":"reset-password-Dvklw8Zg.js","sources":["../../src/pages/auth/reset-password.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { supabase } from '../../lib/supabase';\n\nexport default function ResetPasswordPage() {\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Check if we have the required tokens\n    const accessToken = searchParams.get('access_token');\n    const refreshToken = searchParams.get('refresh_token');\n    \n    if (!accessToken || !refreshToken) {\n      setError('Enlace de recuperación inválido o expirado');\n      return;\n    }\n\n    // Set the session with the tokens\n    supabase.auth.setSession({\n      access_token: accessToken,\n      refresh_token: refreshToken\n    });\n  }, [searchParams]);\n\n  const handleResetPassword = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    if (password !== confirmPassword) {\n      setError('Las contraseñas no coinciden');\n      setLoading(false);\n      return;\n    }\n\n    if (password.length < 6) {\n      setError('La contraseña debe tener al menos 6 caracteres');\n      setLoading(false);\n      return;\n    }\n\n    const { error } = await supabase.auth.updateUser({\n      password: password\n    });\n\n    if (error) {\n      setError('Error al actualizar la contraseña. Por favor intenta nuevamente.');\n    } else {\n      setSuccess(true);\n      setTimeout(() => {\n        navigate('/auth/login');\n      }, 3000);\n    }\n\n    setLoading(false);\n  };\n\n  if (success) {\n    return (\n      <div className=\"min-h-screen bg-navy-gradient flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full bg-navy-gradient-light rounded-xl shadow-lg p-8 text-center border border-navy-600\">\n          <div className=\"mb-6\">\n            <i className=\"ri-check-circle-line text-6xl text-green-400 mb-4\"></i>\n            <h2 className=\"text-2xl font-bold text-white mb-2\">¡Contraseña actualizada!</h2>\n            <p className=\"text-gray-300\">Tu contraseña ha sido cambiada exitosamente. Redirigiendo al login...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-navy-gradient flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div className=\"text-center\">\n          <h1 className=\"text-3xl font-bold text-white mb-2\" style={{ fontFamily: '\"Pacifico\", serif' }}>\n            Contabi RD\n          </h1>\n          <h2 className=\"text-xl font-semibold text-gray-200\">\n            Nueva Contraseña\n          </h2>\n          <p className=\"mt-2 text-gray-300\">\n            Ingresa tu nueva contraseña\n          </p>\n        </div>\n\n        <div className=\"bg-navy-gradient-light rounded-lg shadow-xl p-8 border border-navy-600\">\n          {error && (\n            <div className=\"mb-4 p-3 bg-red-500/20 border border-red-400 text-red-300 rounded-md text-sm\">\n              {error}\n            </div>\n          )}\n\n          <form className=\"space-y-6\" onSubmit={handleResetPassword}>\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-200 mb-2\">\n                Nueva Contraseña\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full px-3 py-2 bg-navy-800 border border-navy-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"••••••••\"\n              />\n              <p className=\"mt-1 text-xs text-gray-400\">Mínimo 6 caracteres</p>\n            </div>\n\n            <div>\n              <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-200 mb-2\">\n                Confirmar Nueva Contraseña\n              </label>\n              <input\n                id=\"confirmPassword\"\n                name=\"confirmPassword\"\n                type=\"password\"\n                required\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                className=\"w-full px-3 py-2 bg-navy-800 border border-navy-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"••••••••\"\n              />\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 whitespace-nowrap\"\n              >\n                {loading ? (\n                  <div className=\"flex items-center\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                    Actualizando...\n                  </div>\n                ) : (\n                  'Actualizar Contraseña'\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ResetPasswordPage","password","setPassword","useState","confirmPassword","setConfirmPassword","loading","setLoading","error","setError","success","setSuccess","searchParams","useSearchParams","navigate","useNavigate","useEffect","accessToken","refreshToken","supabase","handleResetPassword","e","jsx","jsxs"],"mappings":"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"}