import{r as d,j as e,D}from"./index-CIddALDL.js";function k(){const[h,c]=d.useState(!1),[n,p]=d.useState(null),[x,m]=d.useState("all"),[r,o]=d.useState([{id:1,number:"ADV-2024-001",date:"2024-01-15",supplier:"Proveedor Industrial SA",amount:5e4,reason:"Anticipo para materiales industriales proyecto Q1",status:"Aprobado",approvedBy:"Juan Pérez",dueDate:"2024-02-15",remainingBalance:35e3,appliedAmount:15e3},{id:2,number:"ADV-2024-002",date:"2024-01-14",supplier:"Distribuidora Nacional SRL",amount:25e3,reason:"Anticipo para compra de inventario",status:"Pendiente",approvedBy:"",dueDate:"2024-02-14",remainingBalance:25e3,appliedAmount:0},{id:3,number:"ADV-2024-003",date:"2024-01-13",supplier:"Servicios Técnicos EIRL",amount:15e3,reason:"Anticipo para servicios técnicos especializados",status:"Aplicado",approvedBy:"María García",dueDate:"2024-01-30",remainingBalance:0,appliedAmount:15e3},{id:4,number:"ADV-2024-004",date:"2024-01-12",supplier:"Materiales Construcción SA",amount:75e3,reason:"Anticipo para materiales de construcción premium",status:"Rechazado",approvedBy:"",dueDate:"2024-02-12",remainingBalance:75e3,appliedAmount:0}]),[a,i]=d.useState({supplier:"",amount:"",reason:"",dueDate:""}),g=["Proveedor Industrial SA","Distribuidora Nacional SRL","Servicios Técnicos EIRL","Materiales Construcción SA"],b=r.filter(t=>x==="all"||t.status===x),j=t=>{if(t.preventDefault(),n)o(r.map(s=>s.id===n.id?{...s,supplier:a.supplier,amount:parseFloat(a.amount),reason:a.reason,dueDate:a.dueDate,remainingBalance:parseFloat(a.amount)}:s));else{const s={id:r.length+1,number:`ADV-2024-${String(r.length+1).padStart(3,"0")}`,date:new Date().toISOString().split("T")[0],supplier:a.supplier,amount:parseFloat(a.amount),reason:a.reason,status:"Pendiente",approvedBy:"",dueDate:a.dueDate,remainingBalance:parseFloat(a.amount),appliedAmount:0};o([...r,s])}u(),alert(n?"Anticipo actualizado exitosamente":"Anticipo creado exitosamente")},u=()=>{i({supplier:"",amount:"",reason:"",dueDate:""}),p(null),c(!1)},y=t=>{p(t),i({supplier:t.supplier,amount:t.amount.toString(),reason:t.reason,dueDate:t.dueDate}),c(!0)},f=t=>{confirm("¿Aprobar este anticipo?")&&(o(r.map(s=>s.id===t?{...s,status:"Aprobado",approvedBy:"Usuario Actual"}:s)),alert("Anticipo aprobado exitosamente"))},N=t=>{confirm("¿Rechazar este anticipo?")&&(o(r.map(s=>s.id===t?{...s,status:"Rechazado"}:s)),alert("Anticipo rechazado"))},w=t=>{const s=r.find(l=>l.id===t);s&&confirm(`¿Aplicar anticipo de RD$ ${s.remainingBalance.toLocaleString()}?`)&&(o(r.map(l=>l.id===t?{...l,status:"Aplicado",appliedAmount:l.amount,remainingBalance:0}:l)),alert("Anticipo aplicado exitosamente"))},v=()=>{alert("Exportando anticipos a Excel...")},A=t=>{alert(`Imprimiendo anticipo: ${t.number}`)};return e.jsx(D,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Anticipos a Proveedores"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona anticipos y pagos adelantados"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:v,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-excel-line mr-2"}),"Exportar Excel"]}),e.jsxs("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Nuevo Anticipo"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-xl text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Anticipos"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$ ",r.reduce((t,s)=>t+s.amount,0).toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-time-line text-xl text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$ ",r.filter(t=>t.status==="Pendiente").reduce((t,s)=>t+s.amount,0).toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-check-line text-xl text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Aprobados"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$ ",r.filter(t=>t.status==="Aprobado").reduce((t,s)=>t+s.amount,0).toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-wallet-line text-xl text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Saldo Pendiente"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["RD$ ",r.reduce((t,s)=>t+s.remainingBalance,0).toLocaleString()]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:x,onChange:t=>m(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"Aprobado",children:"Aprobado"}),e.jsx("option",{value:"Aplicado",children:"Aplicado"}),e.jsx("option",{value:"Rechazado",children:"Rechazado"})]})]}),e.jsx("div",{className:"md:col-span-2 flex items-end",children:e.jsx("button",{onClick:()=>m("all"),className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors whitespace-nowrap",children:"Limpiar Filtros"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Lista de Anticipos"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Proveedor"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.supplier}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:t.reason})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:["RD$ ",t.amount.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-gray-900",children:["RD$ ",t.remainingBalance.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.dueDate}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.status==="Aprobado"?"bg-green-100 text-green-800":t.status==="Pendiente"?"bg-orange-100 text-orange-800":t.status==="Aplicado"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>A(t),className:"text-gray-600 hover:text-gray-900 whitespace-nowrap",children:e.jsx("i",{className:"ri-printer-line"})}),e.jsx("button",{onClick:()=>y(t),className:"text-indigo-600 hover:text-indigo-900 whitespace-nowrap",children:e.jsx("i",{className:"ri-edit-line"})}),t.status==="Pendiente"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f(t.id),className:"text-green-600 hover:text-green-900 whitespace-nowrap",children:e.jsx("i",{className:"ri-check-line"})}),e.jsx("button",{onClick:()=>N(t.id),className:"text-red-600 hover:text-red-900 whitespace-nowrap",children:e.jsx("i",{className:"ri-close-line"})})]}),t.status==="Aprobado"&&t.remainingBalance>0&&e.jsx("button",{onClick:()=>w(t.id),className:"text-blue-600 hover:text-blue-900 whitespace-nowrap",children:e.jsx("i",{className:"ri-wallet-line"})})]})})]},t.id))})]})})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n?"Editar Anticipo":"Nuevo Anticipo"})}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proveedor *"}),e.jsxs("select",{required:!0,value:a.supplier,onChange:t=>i({...a,supplier:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Seleccionar proveedor"}),g.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto *"}),e.jsx("input",{type:"number",required:!0,step:"0.01",value:a.amount,onChange:t=>i({...a,amount:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo *"}),e.jsx("textarea",{required:!0,value:a.reason,onChange:t=>i({...a,reason:t.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe el motivo del anticipo..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Vencimiento *"}),e.jsx("input",{type:"date",required:!0,value:a.dueDate,onChange:t=>i({...a,dueDate:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 whitespace-nowrap",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 whitespace-nowrap",children:[n?"Actualizar":"Crear"," Anticipo"]})]})]})]})})]})})}export{k as default};
//# sourceMappingURL=page-tin0LqA9.js.map
