const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-CF4tyWO7.js","assets/index-CIddALDL.js","assets/index-tnJrSI5u.css","assets/jspdf.plugin.autotable-BskTgnMR.js"])))=>i.map(i=>d[i]);
import{r as l,j as e,D as R,_ as b}from"./index-CIddALDL.js";const L=async()=>{const i=await b(()=>import("./jspdf.es.min-CF4tyWO7.js").then(r=>r.j),__vite__mapDeps([0,1,2]));return await b(()=>import("./jspdf.plugin.autotable-BskTgnMR.js").then(r=>r.j),__vite__mapDeps([3,1,2,0])),i.default};function B(){const[i,r]=l.useState(!1),[c,d]=l.useState(new Date().toISOString().split("T")[0]),[o,x]=l.useState(""),[T,k]=l.useState("María González"),[E,M]=l.useState("Mañana (8:00 AM - 4:00 PM)"),f=[{id:"CC-2024-015",date:"2024-01-15",cashier:"María González",shift:"Mañana (8:00 AM - 4:00 PM)",openingBalance:5e3,totalSales:185450,cashSales:75200,cardSales:65150,transferSales:35100,otherSales:1e4,totalExpenses:2500,expectedBalance:77700,actualBalance:77500,difference:-200,status:"closed",notes:"Diferencia menor por cambio no registrado"},{id:"CC-2024-014",date:"2024-01-15",cashier:"Carlos Rodríguez",shift:"Tarde (4:00 PM - 12:00 AM)",openingBalance:3e3,totalSales:125300,cashSales:45800,cardSales:52500,transferSales:22e3,otherSales:5e3,totalExpenses:1200,expectedBalance:47600,actualBalance:47600,difference:0,status:"closed",notes:"Cierre perfecto"},{id:"CC-2024-013",date:"2024-01-14",cashier:"Ana Martínez",shift:"Completo (8:00 AM - 8:00 PM)",openingBalance:4e3,totalSales:245600,cashSales:98400,cardSales:89200,transferSales:45e3,otherSales:13e3,totalExpenses:3200,expectedBalance:99200,actualBalance:99500,difference:300,status:"closed",notes:"Sobrante por propina no registrada"},{id:"CC-2024-012",date:"2024-01-14",cashier:"Luis Pérez",shift:"Noche (8:00 PM - 2:00 AM)",openingBalance:2500,totalSales:89750,cashSales:32500,cardSales:38250,transferSales:15e3,otherSales:4e3,totalExpenses:800,expectedBalance:34200,actualBalance:34e3,difference:-200,status:"pending_review",notes:"Pendiente de revisión por diferencia"}],a={cashier:"María González",shift:"Mañana (8:00 AM - 4:00 PM)",startTime:"08:00",openingBalance:5e3,currentSales:45600,cashSales:18200,cardSales:16400,transferSales:8500,otherSales:2500,expenses:500},y=[{name:"Efectivo",amount:a.cashSales,icon:"ri-money-dollar-circle-line",color:"green"},{name:"Tarjeta",amount:a.cardSales,icon:"ri-bank-card-line",color:"blue"},{name:"Transferencia",amount:a.transferSales,icon:"ri-exchange-line",color:"purple"},{name:"Otros",amount:a.otherSales,icon:"ri-more-line",color:"orange"}],j=t=>{switch(t){case"closed":return"bg-green-100 text-green-800";case"pending_review":return"bg-yellow-100 text-yellow-800";case"discrepancy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=t=>{switch(t){case"closed":return"Cerrado";case"pending_review":return"Pendiente Revisión";case"discrepancy":return"Con Discrepancia";default:return"Desconocido"}},w=t=>t===0?"text-green-600":t>0?"text-blue-600":"text-red-600",m=f.filter(t=>t.cashier.toLowerCase().includes(o.toLowerCase())||t.id.toLowerCase().includes(o.toLowerCase())),v=()=>{r(!0)},S=t=>{alert(`Visualizando cierre: ${t}`)},D=t=>{alert(`Imprimiendo cierre: ${t}`)},C=t=>{alert(`Revisando cierre: ${t}`)},n=a.openingBalance+a.cashSales-a.expenses,$=async()=>{try{const t=await L(),s=new t;s.setFontSize(20),s.text("Reporte de Cierre de Caja",20,20),s.setFontSize(12),s.text(`Fecha: ${c}`,20,40),s.text(`Cajero: ${a.cashier}`,20,50),s.text(`Turno: ${a.shift}`,20,60),s.setFontSize(14),s.text("Resumen de Ventas",20,80);const h=[["Concepto","Cantidad","Monto"],["Ventas en Efectivo","45",`RD$ ${a.cashSales.toLocaleString()}.00`],["Ventas con Tarjeta","32",`RD$ ${a.cardSales.toLocaleString()}.00`],["Ventas por Transferencia","18",`RD$ ${a.transferSales.toLocaleString()}.00`],["Otros Métodos","8",`RD$ ${a.otherSales.toLocaleString()}.00`],["Total Ventas","103",`RD$ ${a.currentSales.toLocaleString()}.00`]];s.autoTable({startY:90,head:[h[0]],body:h.slice(1),theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[59,130,246]}}),s.setFontSize(14),s.text("Desglose de Efectivo",20,s.lastAutoTable.finalY+20);const p=[["Denominación","Cantidad","Subtotal"],["RD$ 2,000","5","RD$ 10,000.00"],["RD$ 1,000","8","RD$ 8,000.00"],["RD$ 500","12","RD$ 6,000.00"],["RD$ 200","15","RD$ 3,000.00"],["RD$ 100","20","RD$ 2,000.00"],["RD$ 50","10","RD$ 500.00"],["RD$ 20","25","RD$ 500.00"],["RD$ 10","30","RD$ 300.00"],["RD$ 5","20","RD$ 100.00"],["RD$ 1","50","RD$ 50.00"],["Total Efectivo","",`RD$ ${n.toLocaleString()}.00`]];s.autoTable({startY:s.lastAutoTable.finalY+30,head:[p[0]],body:p.slice(1),theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[34,197,94]}}),s.setFontSize(14),s.text("Resumen Final",20,s.lastAutoTable.finalY+20);const u=[["Concepto","Monto"],["Saldo Inicial",`RD$ ${a.openingBalance.toLocaleString()}.00`],["Total Ventas del Día",`RD$ ${a.currentSales.toLocaleString()}.00`],["Ventas en Efectivo",`RD$ ${a.cashSales.toLocaleString()}.00`],["Gastos del Turno",`RD$ ${a.expenses.toLocaleString()}.00`],["Efectivo Esperado",`RD$ ${n.toLocaleString()}.00`],["Estado","Turno Activo"]];s.autoTable({startY:s.lastAutoTable.finalY+30,head:[u[0]],body:u.slice(1),theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[239,68,68]}});const g=s.internal.pageSize.height;s.setFontSize(10),s.text("Generado automáticamente por Sistema Contable",20,g-20),s.text(`Fecha de generación: ${new Date().toLocaleString()}`,20,g-10),s.save(`cierre-caja-${c}-${a.cashier.replace(/\s+/g,"-")}.pdf`)}catch(t){console.error("Error al generar PDF:",t),alert("Error al generar el PDF. Por favor, intente nuevamente.")}};return e.jsx(R,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Cierre de Caja"}),e.jsx("p",{className:"text-gray-600",children:"Control y reconciliación diaria de efectivo"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:$,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-file-pdf-line mr-2"}),"Exportar PDF"]}),e.jsxs("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-calculator-line mr-2"}),"Nuevo Cierre"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg shadow-sm text-white p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Turno Actual"}),e.jsxs("p",{className:"text-blue-100",children:[a.cashier," - ",a.shift]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-blue-100",children:["Inicio: ",a.startTime]}),e.jsxs("p",{className:"text-blue-100",children:["Fecha: ",new Date().toLocaleDateString("es-DO")]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Saldo Inicial"}),e.jsxs("p",{className:"text-2xl font-bold",children:["RD$ ",a.openingBalance.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Ventas Actuales"}),e.jsxs("p",{className:"text-2xl font-bold",children:["RD$ ",a.currentSales.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Gastos"}),e.jsxs("p",{className:"text-2xl font-bold",children:["RD$ ",a.expenses.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg p-4",children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Efectivo Esperado"}),e.jsxs("p",{className:"text-2xl font-bold",children:["RD$ ",n.toLocaleString()]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:y.map((t,s)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t.name}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["RD$ ",t.amount.toLocaleString()]})]}),e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center bg-${t.color}-100`,children:e.jsx("i",{className:`${t.icon} text-xl text-${t.color}-600`})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`bg-${t.color}-600 h-2 rounded-full`,style:{width:`${t.amount/a.currentSales*100}%`}})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(t.amount/a.currentSales*100).toFixed(1),"% del total"]})]})]},s))}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar por cajero o ID...",value:o,onChange:t=>x(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),e.jsx("input",{type:"date",value:c,onChange:t=>d(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>{x(""),d(new Date().toISOString().split("T")[0])},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:[e.jsx("i",{className:"ri-refresh-line mr-2"}),"Limpiar Filtros"]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Cierres de Caja (",m.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cajero"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Turno"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ventas Totales"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Efectivo Esperado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Efectivo Real"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diferencia"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(t.date).toLocaleDateString("es-DO")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.cashier})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.shift})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["RD$ ",t.totalSales.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$ ",t.expectedBalance.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RD$ ",t.actualBalance.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`text-sm font-medium ${w(t.difference)}`,children:[t.difference>=0?"+":"","RD$ ",t.difference.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${j(t.status)}`,children:N(t.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>S(t.id),className:"text-blue-600 hover:text-blue-900 p-1",title:"Ver cierre",children:e.jsx("i",{className:"ri-eye-line"})}),e.jsx("button",{onClick:()=>D(t.id),className:"text-gray-600 hover:text-gray-900 p-1",title:"Imprimir cierre",children:e.jsx("i",{className:"ri-printer-line"})}),t.status==="pending_review"&&e.jsx("button",{onClick:()=>C(t.id),className:"text-yellow-600 hover:text-yellow-900 p-1",title:"Revisar cierre",children:e.jsx("i",{className:"ri-search-line"})})]})})]},t.id))})]})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nuevo Cierre de Caja"}),e.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cajero"}),e.jsx("input",{type:"text",value:a.cashier,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Turno"}),e.jsx("input",{type:"text",value:a.shift,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saldo Inicial"}),e.jsx("input",{type:"number",value:a.openingBalance,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ventas en Efectivo"}),e.jsx("input",{type:"number",value:a.cashSales,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gastos"}),e.jsx("input",{type:"number",value:a.expenses,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Efectivo Esperado"}),e.jsx("input",{type:"number",value:n,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-semibold"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Efectivo Real Contado"}),e.jsx("input",{type:"number",placeholder:"Ingrese el efectivo contado físicamente",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas del Cierre"}),e.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Observaciones, incidencias o comentarios sobre el cierre..."})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Cancelar"}),e.jsx("button",{onClick:()=>{alert("Procesando cierre de caja..."),r(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Procesar Cierre"})]})]})})]})})}export{B as default};
//# sourceMappingURL=page-DYjdpZUG.js.map
