{"version":3,"file":"page-bWlI2-2Q.js","sources":["../../src/pages/accounts-receivable/advances/page.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport DashboardLayout from '../../../components/layout/DashboardLayout';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\n\ninterface Advance {\n  id: string;\n  advanceNumber: string;\n  customerId: string;\n  customerName: string;\n  date: string;\n  amount: number;\n  appliedAmount: number;\n  balance: number;\n  paymentMethod: 'cash' | 'check' | 'transfer' | 'card';\n  reference: string;\n  concept: string;\n  status: 'pending' | 'applied' | 'partial' | 'cancelled';\n  appliedInvoices: string[];\n}\n\nexport default function AdvancesPage() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [showAdvanceModal, setShowAdvanceModal] = useState(false);\n  const [showAdvanceDetails, setShowAdvanceDetails] = useState(false);\n  const [showApplyModal, setShowApplyModal] = useState(false);\n  const [selectedAdvance, setSelectedAdvance] = useState<Advance | null>(null);\n\n  // Mock data\n  const advances: Advance[] = [\n    {\n      id: '1',\n      advanceNumber: 'ANT-001',\n      customerId: '1',\n      customerName: 'Empresa ABC S.R.L.',\n      date: '2024-01-10',\n      amount: 100000,\n      appliedAmount: 75000,\n      balance: 25000,\n      paymentMethod: 'transfer',\n      reference: 'TRF-ANT-001',\n      concept: 'Anticipo para futuras compras',\n      status: 'partial',\n      appliedInvoices: ['FAC-001', 'FAC-002']\n    },\n    {\n      id: '2',\n      advanceNumber: 'ANT-002',\n      customerId: '2',\n      customerName: 'Comercial XYZ',\n      date: '2024-01-15',\n      amount: 150000,\n      appliedAmount: 0,\n      balance: 150000,\n      paymentMethod: 'check',\n      reference: 'CHK-ANT-001',\n      concept: 'Anticipo por servicios futuros',\n      status: 'pending',\n      appliedInvoices: []\n    },\n    {\n      id: '3',\n      advanceNumber: 'ANT-003',\n      customerId: '3',\n      customerName: 'Distribuidora DEF',\n      date: '2024-01-20',\n      amount: 80000,\n      appliedAmount: 80000,\n      balance: 0,\n      paymentMethod: 'cash',\n      reference: 'EFE-ANT-001',\n      concept: 'Anticipo aplicado completamente',\n      status: 'applied',\n      appliedInvoices: ['FAC-003']\n    },\n    {\n      id: '4',\n      advanceNumber: 'ANT-004',\n      customerId: '1',\n      customerName: 'Empresa ABC S.R.L.',\n      date: '2024-01-25',\n      amount: 200000,\n      appliedAmount: 0,\n      balance: 200000,\n      paymentMethod: 'card',\n      reference: 'TDC-ANT-001',\n      concept: 'Anticipo para proyecto especial',\n      status: 'pending',\n      appliedInvoices: []\n    },\n    {\n      id: '5',\n      advanceNumber: 'ANT-005',\n      customerId: '2',\n      customerName: 'Comercial XYZ',\n      date: '2024-01-28',\n      amount: 50000,\n      appliedAmount: 0,\n      balance: 0,\n      paymentMethod: 'transfer',\n      reference: 'TRF-ANT-002',\n      concept: 'Anticipo cancelado',\n      status: 'cancelled',\n      appliedInvoices: []\n    }\n  ];\n\n  const getPaymentMethodName = (method: string) => {\n    switch (method) {\n      case 'cash': return 'Efectivo';\n      case 'check': return 'Cheque';\n      case 'transfer': return 'Transferencia';\n      case 'card': return 'Tarjeta';\n      default: return 'Otro';\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'pending': return 'bg-blue-100 text-blue-800';\n      case 'applied': return 'bg-green-100 text-green-800';\n      case 'partial': return 'bg-yellow-100 text-yellow-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusName = (status: string) => {\n    switch (status) {\n      case 'pending': return 'Pendiente';\n      case 'applied': return 'Aplicado';\n      case 'partial': return 'Parcial';\n      case 'cancelled': return 'Cancelado';\n      default: return 'Desconocido';\n    }\n  };\n\n  const filteredAdvances = advances.filter(advance => {\n    const matchesSearch = advance.customerName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         advance.advanceNumber.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         advance.reference.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesStatus = statusFilter === 'all' || advance.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const exportToPDF = () => {\n    const doc = new jsPDF();\n    \n    doc.setFontSize(20);\n    doc.text('Reporte de Anticipos de Clientes', 20, 20);\n    \n    doc.setFontSize(12);\n    doc.text(`Fecha de generación: ${new Date().toLocaleDateString()}`, 20, 40);\n    doc.text(`Estado: ${statusFilter === 'all' ? 'Todos' : getStatusName(statusFilter)}`, 20, 50);\n    \n    // Estadísticas\n    const totalAmount = filteredAdvances.reduce((sum, advance) => sum + advance.amount, 0);\n    const totalApplied = filteredAdvances.reduce((sum, advance) => sum + advance.appliedAmount, 0);\n    const totalBalance = filteredAdvances.reduce((sum, advance) => sum + advance.balance, 0);\n    const pendingAdvances = filteredAdvances.filter(a => a.status === 'pending').length;\n    \n    doc.setFontSize(14);\n    doc.text('Resumen de Anticipos', 20, 70);\n    \n    const summaryData = [\n      ['Concepto', 'Valor'],\n      ['Total Anticipos', `RD$ ${totalAmount.toLocaleString()}`],\n      ['Total Aplicado', `RD$ ${totalApplied.toLocaleString()}`],\n      ['Saldo Pendiente', `RD$ ${totalBalance.toLocaleString()}`],\n      ['Anticipos Pendientes', pendingAdvances.toString()],\n      ['Total de Anticipos', filteredAdvances.length.toString()]\n    ];\n    \n    (doc as any).autoTable({\n      startY: 80,\n      head: [summaryData[0]],\n      body: summaryData.slice(1),\n      theme: 'grid',\n      headStyles: { fillColor: [59, 130, 246] }\n    });\n    \n    // Tabla de anticipos\n    doc.setFontSize(14);\n    doc.text('Detalle de Anticipos', 20, (doc as any).lastAutoTable.finalY + 20);\n    \n    const advanceData = filteredAdvances.map(advance => [\n      advance.advanceNumber,\n      advance.customerName,\n      advance.date,\n      `RD$ ${advance.amount.toLocaleString()}`,\n      `RD$ ${advance.appliedAmount.toLocaleString()}`,\n      `RD$ ${advance.balance.toLocaleString()}`,\n      getStatusName(advance.status)\n    ]);\n    \n    (doc as any).autoTable({\n      startY: (doc as any).lastAutoTable.finalY + 30,\n      head: [['Anticipo', 'Cliente', 'Fecha', 'Monto', 'Aplicado', 'Saldo', 'Estado']],\n      body: advanceData,\n      theme: 'striped',\n      headStyles: { fillColor: [34, 197, 94] },\n      styles: { fontSize: 8 }\n    });\n    \n    doc.save(`anticipos-clientes-${new Date().toISOString().split('T')[0]}.pdf`);\n  };\n\n  const exportToExcel = () => {\n    const totalAmount = filteredAdvances.reduce((sum, advance) => sum + advance.amount, 0);\n    const totalApplied = filteredAdvances.reduce((sum, advance) => sum + advance.appliedAmount, 0);\n    const totalBalance = filteredAdvances.reduce((sum, advance) => sum + advance.balance, 0);\n    const pendingAdvances = filteredAdvances.filter(a => a.status === 'pending').length;\n    \n    const csvContent = [\n      ['Reporte de Anticipos de Clientes'],\n      [`Fecha de generación: ${new Date().toLocaleDateString()}`],\n      [`Estado: ${statusFilter === 'all' ? 'Todos' : getStatusName(statusFilter)}`],\n      [''],\n      ['RESUMEN'],\n      ['Total Anticipos', `RD$ ${totalAmount.toLocaleString()}`],\n      ['Total Aplicado', `RD$ ${totalApplied.toLocaleString()}`],\n      ['Saldo Pendiente', `RD$ ${totalBalance.toLocaleString()}`],\n      ['Anticipos Pendientes', pendingAdvances.toString()],\n      ['Total de Anticipos', filteredAdvances.length.toString()],\n      [''],\n      ['DETALLE DE ANTICIPOS'],\n      ['Anticipo', 'Cliente', 'Fecha', 'Monto', 'Aplicado', 'Saldo', 'Método Pago', 'Referencia', 'Estado'],\n      ...filteredAdvances.map(advance => [\n        advance.advanceNumber,\n        advance.customerName,\n        advance.date,\n        advance.amount,\n        advance.appliedAmount,\n        advance.balance,\n        getPaymentMethodName(advance.paymentMethod),\n        advance.reference,\n        getStatusName(advance.status)\n      ])\n    ].map(row => row.join(',')).join('\\n');\n    \n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = `anticipos-clientes-${new Date().toISOString().split('T')[0]}.csv`;\n    link.click();\n  };\n\n  const handleNewAdvance = () => {\n    setSelectedAdvance(null);\n    setShowAdvanceModal(true);\n  };\n\n  const handleViewAdvance = (advance: Advance) => {\n    setSelectedAdvance(advance);\n    setShowAdvanceDetails(true);\n  };\n\n  const handleApplyAdvance = (advance: Advance) => {\n    setSelectedAdvance(advance);\n    setShowApplyModal(true);\n  };\n\n  const handleCancelAdvance = (advanceId: string) => {\n    if (confirm('¿Está seguro de que desea cancelar este anticipo?')) {\n      alert('Anticipo cancelado exitosamente');\n    }\n  };\n\n  const handleSaveAdvance = (e: React.FormEvent) => {\n    e.preventDefault();\n    alert('Anticipo creado exitosamente');\n    setShowAdvanceModal(false);\n  };\n\n  const handleSaveApplication = (e: React.FormEvent) => {\n    e.preventDefault();\n    alert('Anticipo aplicado exitosamente');\n    setShowApplyModal(false);\n    setSelectedAdvance(null);\n  };\n\n  return (\n    <DashboardLayout>\n      <div className=\"p-6\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Anticipos de Clientes</h1>\n            <nav className=\"flex space-x-2 text-sm text-gray-600 mt-2\">\n              <Link to=\"/accounts-receivable\" className=\"hover:text-blue-600\">Cuentas por Cobrar</Link>\n              <span>/</span>\n              <span>Anticipos</span>\n            </nav>\n          </div>\n          <button \n            onClick={handleNewAdvance}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n          >\n            <i className=\"ri-add-line mr-2\"></i>\n            Nuevo Anticipo\n          </button>\n        </div>\n\n        {/* Summary Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Total Anticipos</p>\n                <p className=\"text-2xl font-bold text-blue-600\">\n                  RD${filteredAdvances.reduce((sum, a) => sum + a.amount, 0).toLocaleString()}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-money-dollar-circle-line text-2xl text-blue-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Saldo Disponible</p>\n                <p className=\"text-2xl font-bold text-green-600\">\n                  RD${filteredAdvances.reduce((sum, a) => sum + a.balance, 0).toLocaleString()}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-wallet-line text-2xl text-green-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Monto Aplicado</p>\n                <p className=\"text-2xl font-bold text-purple-600\">\n                  RD${filteredAdvances.reduce((sum, a) => sum + a.appliedAmount, 0).toLocaleString()}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-check-double-line text-2xl text-purple-600\"></i>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Anticipos Pendientes</p>\n                <p className=\"text-2xl font-bold text-orange-600\">\n                  {filteredAdvances.filter(a => a.status === 'pending').length}\n                </p>\n              </div>\n              <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-time-line text-2xl text-orange-600\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filters and Export */}\n        <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\n          <div className=\"flex-1\">\n            <div className=\"relative\">\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                <i className=\"ri-search-line text-gray-400\"></i>\n              </div>\n              <input\n                type=\"text\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm\"\n                placeholder=\"Buscar por cliente, número de anticipo o referencia...\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"w-full md:w-48\">\n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm pr-8\"\n            >\n              <option value=\"all\">Todos los Estados</option>\n              <option value=\"pending\">Pendientes</option>\n              <option value=\"partial\">Parciales</option>\n              <option value=\"applied\">Aplicados</option>\n              <option value=\"cancelled\">Cancelados</option>\n            </select>\n          </div>\n          \n          <div className=\"flex space-x-2\">\n            <button\n              onClick={exportToPDF}\n              className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap\"\n            >\n              <i className=\"ri-file-pdf-line mr-2\"></i>PDF\n            </button>\n            <button\n              onClick={exportToExcel}\n              className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap\"\n            >\n              <i className=\"ri-file-excel-line mr-2\"></i>Excel\n            </button>\n          </div>\n        </div>\n\n        {/* Advances Table */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Anticipo\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Cliente\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Fecha\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Monto\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Aplicado\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Saldo\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Estado\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Acciones\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredAdvances.map((advance) => (\n                  <tr key={advance.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                      {advance.advanceNumber}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {advance.customerName}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {advance.date}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                      RD${advance.amount.toLocaleString()}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      RD${advance.appliedAmount.toLocaleString()}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600\">\n                      RD${advance.balance.toLocaleString()}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(advance.status)}`}>\n                        {getStatusName(advance.status)}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <div className=\"flex space-x-2\">\n                        <button\n                          onClick={() => handleViewAdvance(advance)}\n                          className=\"text-blue-600 hover:text-blue-900\"\n                          title=\"Ver detalles\"\n                        >\n                          <i className=\"ri-eye-line\"></i>\n                        </button>\n                        {advance.balance > 0 && advance.status !== 'cancelled' && (\n                          <button\n                            onClick={() => handleApplyAdvance(advance)}\n                            className=\"text-green-600 hover:text-green-900\"\n                            title=\"Aplicar anticipo\"\n                          >\n                            <i className=\"ri-check-line\"></i>\n                          </button>\n                        )}\n                        {advance.status === 'pending' && (\n                          <button\n                            onClick={() => handleCancelAdvance(advance.id)}\n                            className=\"text-red-600 hover:text-red-900\"\n                            title=\"Cancelar anticipo\"\n                          >\n                            <i className=\"ri-close-circle-line\"></i>\n                          </button>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {/* New Advance Modal */}\n        {showAdvanceModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-semibold\">Nuevo Anticipo de Cliente</h3>\n                <button\n                  onClick={() => setShowAdvanceModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <i className=\"ri-close-line\"></i>\n                </button>\n              </div>\n              \n              <form onSubmit={handleSaveAdvance} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Cliente\n                    </label>\n                    <select \n                      required\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8\"\n                    >\n                      <option value=\"\">Seleccionar cliente</option>\n                      <option value=\"1\">Empresa ABC S.R.L.</option>\n                      <option value=\"2\">Comercial XYZ</option>\n                      <option value=\"3\">Distribuidora DEF</option>\n                    </select>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Fecha\n                    </label>\n                    <input\n                      type=\"date\"\n                      required\n                      defaultValue={new Date().toISOString().split('T')[0]}\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    />\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Monto del Anticipo\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      required\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      placeholder=\"0.00\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Método de Pago\n                    </label>\n                    <select \n                      required\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8\"\n                    >\n                      <option value=\"cash\">Efectivo</option>\n                      <option value=\"check\">Cheque</option>\n                      <option value=\"transfer\">Transferencia</option>\n                      <option value=\"card\">Tarjeta</option>\n                    </select>\n                  </div>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Referencia\n                  </label>\n                  <input\n                    type=\"text\"\n                    required\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    placeholder=\"Número de referencia del pago\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Concepto\n                  </label>\n                  <textarea\n                    rows={3}\n                    required\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    placeholder=\"Descripción del anticipo recibido...\"\n                  />\n                </div>\n                \n                <div className=\"flex space-x-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowAdvanceModal(false)}\n                    className=\"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors whitespace-nowrap\"\n                  >\n                    Cancelar\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap\"\n                  >\n                    Crear Anticipo\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* Apply Advance Modal */}\n        {showApplyModal && selectedAdvance && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-semibold\">Aplicar Anticipo</h3>\n                <button\n                  onClick={() => {\n                    setShowApplyModal(false);\n                    setSelectedAdvance(null);\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <i className=\"ri-close-line\"></i>\n                </button>\n              </div>\n              \n              <div className=\"mb-4 p-4 bg-gray-50 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Anticipo: <span className=\"font-medium\">{selectedAdvance.advanceNumber}</span></p>\n                <p className=\"text-sm text-gray-600\">Cliente: <span className=\"font-medium\">{selectedAdvance.customerName}</span></p>\n                <p className=\"text-lg font-semibold text-green-600\">Saldo disponible: RD${selectedAdvance.balance.toLocaleString()}</p>\n              </div>\n              \n              <form onSubmit={handleSaveApplication} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Factura a Aplicar\n                  </label>\n                  <select \n                    required\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-8\"\n                  >\n                    <option value=\"\">Seleccionar factura</option>\n                    <option value=\"FAC-001\">FAC-001 - RD$ 50,000</option>\n                    <option value=\"FAC-002\">FAC-002 - RD$ 75,000</option>\n                    <option value=\"FAC-003\">FAC-003 - RD$ 100,000</option>\n                  </select>\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Monto a Aplicar\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    required\n                    max={selectedAdvance.balance}\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    placeholder=\"0.00\"\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Observaciones\n                  </label>\n                  <textarea\n                    rows={3}\n                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    placeholder=\"Observaciones sobre la aplicación del anticipo...\"\n                  />\n                </div>\n                \n                <div className=\"flex space-x-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowApplyModal(false);\n                      setSelectedAdvance(null);\n                    }}\n                    className=\"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors whitespace-nowrap\"\n                  >\n                    Cancelar\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap\"\n                  >\n                    Aplicar Anticipo\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        )}\n\n        {/* Advance Details Modal */}\n        {showAdvanceDetails && selectedAdvance && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h3 className=\"text-lg font-semibold\">Detalles del Anticipo</h3>\n                <button\n                  onClick={() => {\n                    setShowAdvanceDetails(false);\n                    setSelectedAdvance(null);\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <i className=\"ri-close-line\"></i>\n                </button>\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-500\">Número de Anticipo</label>\n                    <p className=\"text-lg font-semibold text-gray-900\">{selectedAdvance.advanceNumber}</p>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-500\">Cliente</label>\n                    <p className=\"text-gray-900\">{selectedAdvance.customerName}</p>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-500\">Fecha</label>\n                    <p className=\"text-gray-900\">{selectedAdvance.date}</p>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-500\">Monto Original</label>\n                    <p className=\"text-2xl font-bold text-blue-600\">RD${selectedAdvance.amount.toLocaleString()}</p>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-500\">Método de Pago</label>\n                    <p className=\"text-gray-900\">{getPaymentMethodName(selectedAdvance.paymentMethod)}</p>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-500\">Referencia</label>\n                    <p className=\"text-gray-900\">{selectedAdvance.reference}</p>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-500\">Monto Aplicado</label>\n                    <p className=\"text-lg font-semibold text-purple-600\">RD${selectedAdvance.appliedAmount.toLocaleString()}</p>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-500\">Saldo Disponible</label>\n                    <p className=\"text-2xl font-bold text-green-600\">RD${selectedAdvance.balance.toLocaleString()}</p>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"mt-6\">\n                <label className=\"block text-sm font-medium text-gray-500\">Estado</label>\n                <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(selectedAdvance.status)} mt-1`}>\n                  {getStatusName(selectedAdvance.status)}\n                </span>\n              </div>\n              \n              <div className=\"mt-6\">\n                <label className=\"block text-sm font-medium text-gray-500\">Concepto</label>\n                <p className=\"text-gray-900 mt-1\">{selectedAdvance.concept}</p>\n              </div>\n              \n              {selectedAdvance.appliedInvoices.length > 0 && (\n                <div className=\"mt-6\">\n                  <label className=\"block text-sm font-medium text-gray-500\">Facturas Aplicadas</label>\n                  <div className=\"flex flex-wrap gap-2 mt-1\">\n                    {selectedAdvance.appliedInvoices.map((invoice, index) => (\n                      <span key={index} className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm\">\n                        {invoice}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              )}\n              \n              <div className=\"flex space-x-3 mt-6\">\n                {selectedAdvance.balance > 0 && selectedAdvance.status !== 'cancelled' && (\n                  <button\n                    onClick={() => {\n                      setShowAdvanceDetails(false);\n                      setShowApplyModal(true);\n                    }}\n                    className=\"flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap\"\n                  >\n                    <i className=\"ri-check-line mr-2\"></i>\n                    Aplicar Anticipo\n                  </button>\n                )}\n                {selectedAdvance.status === 'pending' && (\n                  <button\n                    onClick={() => handleCancelAdvance(selectedAdvance.id)}\n                    className=\"flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition-colors whitespace-nowrap\"\n                  >\n                    <i className=\"ri-close-circle-line mr-2\"></i>\n                    Cancelar Anticipo\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  );\n}"],"names":["AdvancesPage","searchTerm","setSearchTerm","useState","statusFilter","setStatusFilter","showAdvanceModal","setShowAdvanceModal","showAdvanceDetails","setShowAdvanceDetails","showApplyModal","setShowApplyModal","selectedAdvance","setSelectedAdvance","advances","getPaymentMethodName","method","getStatusColor","status","getStatusName","filteredAdvances","advance","matchesSearch","matchesStatus","exportToPDF","doc","jsPDF","totalAmount","sum","totalApplied","totalBalance","pendingAdvances","a","summaryData","advanceData","exportToExcel","csvContent","row","blob","link","handleNewAdvance","handleViewAdvance","handleApplyAdvance","handleCancelAdvance","advanceId","handleSaveAdvance","e","handleSaveApplication","jsx","DashboardLayout","jsxs","Link","invoice","index"],"mappings":"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"}