import{r as l,j as e,D as w}from"./index-CIddALDL.js";import{s as d}from"./database-D6UsPckU.js";function C(){const[s,g]=l.useState({valuation_method:"fifo",auto_reorder:!0,reorder_point:10,default_warehouse:"",track_serial_numbers:!1,track_expiration:!1,negative_stock_allowed:!1}),[h,p]=l.useState([]),[y,i]=l.useState(!1),[x,m]=l.useState({name:"",location:""}),[c,o]=l.useState(!1),[u,n]=l.useState(null);l.useEffect(()=>{f(),b()},[]);const f=async()=>{try{const a=await d.getInventorySettings();a&&g(a)}catch(a){console.error("Error loading inventory settings:",a)}},b=async()=>{try{const a=await d.getWarehouses();p(a)}catch(a){console.error("Error loading warehouses:",a)}},j=async a=>{a.preventDefault(),o(!0),n(null);try{await d.saveInventorySettings(s),n({type:"success",text:"Configuración de inventario guardada exitosamente"})}catch{n({type:"error",text:"Error al guardar la configuración"})}finally{o(!1)}},v=async a=>{a.preventDefault(),o(!0);try{await d.createWarehouse(x),n({type:"success",text:"Almacén creado exitosamente"}),i(!1),m({name:"",location:""}),b()}catch{n({type:"error",text:"Error al crear el almacén"})}finally{o(!1)}},t=(a,r)=>{g(N=>({...N,[a]:r}))};return e.jsxs(w,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuración de Inventario"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configura métodos de valuación, categorías y almacenes"})]}),e.jsxs("button",{onClick:()=>window.REACT_APP_NAVIGATE("/settings"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[e.jsx("i",{className:"ri-arrow-left-line"}),e.jsx("span",{children:"Volver a Configuración"})]})]})}),u&&e.jsx("div",{className:`p-4 rounded-lg ${u.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:u.text}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Métodos de Valuación"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Método de Valuación *"}),e.jsxs("select",{value:s.valuation_method,onChange:a=>t("valuation_method",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"fifo",children:"FIFO (Primero en Entrar, Primero en Salir)"}),e.jsx("option",{value:"lifo",children:"LIFO (Último en Entrar, Primero en Salir)"}),e.jsx("option",{value:"average",children:"Promedio Ponderado"}),e.jsx("option",{value:"specific",children:"Identificación Específica"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Almacén Predeterminado"}),e.jsxs("select",{value:s.default_warehouse,onChange:a=>t("default_warehouse",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seleccionar almacén"}),h.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuración de Reorden"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"auto_reorder",checked:s.auto_reorder,onChange:a=>t("auto_reorder",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"auto_reorder",className:"ml-2 block text-sm text-gray-900",children:"Habilitar reorden automático"})]}),s.auto_reorder&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Punto de Reorden Predeterminado"}),e.jsx("input",{type:"number",min:"0",value:s.reorder_point,onChange:a=>t("reorder_point",parseInt(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuración de Seguimiento"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"track_serial_numbers",checked:s.track_serial_numbers,onChange:a=>t("track_serial_numbers",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"track_serial_numbers",className:"ml-2 block text-sm text-gray-900",children:"Rastrear números de serie"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"track_expiration",checked:s.track_expiration,onChange:a=>t("track_expiration",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"track_expiration",className:"ml-2 block text-sm text-gray-900",children:"Rastrear fechas de vencimiento"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"negative_stock_allowed",checked:s.negative_stock_allowed,onChange:a=>t("negative_stock_allowed",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"negative_stock_allowed",className:"ml-2 block text-sm text-gray-900",children:"Permitir stock negativo"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>window.REACT_APP_NAVIGATE("/settings"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Guardando...":"Guardar Cambios"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Almacenes"}),e.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx("i",{className:"ri-add-line"}),e.jsx("span",{children:"Nuevo Almacén"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ubicación"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.location}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.active?"Activo":"Inactivo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:e.jsx("i",{className:"ri-edit-line"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:e.jsx("i",{className:"ri-delete-bin-line"})})]})})]},a.id))})]})})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nuevo Almacén"}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),e.jsx("input",{type:"text",required:!0,value:x.name,onChange:a=>m(r=>({...r,name:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ubicación *"}),e.jsx("input",{type:"text",required:!0,value:x.location,onChange:a=>m(r=>({...r,location:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Creando...":"Crear Almacén"})]})]})]})})]})}export{C as default};
//# sourceMappingURL=page-B55B0u1h.js.map
